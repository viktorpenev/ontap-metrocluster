<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Upgrading controllers in a MetroCluster FC configuration using switchover and switchback</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Upgrading controllers in a MetroCluster FC configuration using switchover and switchback" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/ontap-metrocluster/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html" />
	<meta property="og:description" content="You can use the MetroCluster switchover operation to provide nondisruptive service to clients while the controller modules on the partner cluster are upgrade..." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/ontap-metrocluster/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="You can use the MetroCluster switchover operation to provide nondisruptive service to clients while the controller modules on the partner cluster are upgrade...">
  <meta name="keywords" content=" metrocluster, upgrade, controllers, switchover, switchback, fc, configuration, net, boot, root, aggregate">
  
  

  <!-- Icons -->
  <link rel="icon" href="/us-en/ontap-metrocluster/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- Controls AsciiDoctor Admonition Blocks -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/font-awesome.min.css">

  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/netapp.css">

  <!-- WWW CSS Content -->
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/www-luci-dotcom.min.css">
  <link rel="stylesheet" type="text/css" href="/us-en/ontap-metrocluster/css/www-netapp-dotcom.css">
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/www-netapp-library-critical.min.css" media="all" >
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/www-netapp-library-non-critical.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/www-netapp-library-global-header-footer.min.css">

  <!-- NetApp IE Customizations -->
  <link rel="stylesheet" href='/us-en/ontap-metrocluster/css/na-utility.css' type='text/css'>
  <link rel="stylesheet" href='/us-en/ontap-metrocluster/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/clouddocs.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/na-pagenav.css' type='text/css'>

  
  <link rel="stylesheet" href="/us-en/ontap-metrocluster/css/astra.css" type="text/css">
  

  
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/na-feature.css' type='text/css'>
  


  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/us-en/ontap-metrocluster/js/na-search.js'></script>
  

  
  <script src='/us-en/ontap-metrocluster/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/us-en/ontap-metrocluster/css/prism-netapp.css' type='text/css'>


  <script src='/us-en/ontap-metrocluster/js/na-utility.js'></script>
  <script src='/us-en/ontap-metrocluster/js/clouddocs.js'></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    var head = document.getElementsByTagName('head')[0];
    var adobe = document.createElement("script");
    adobe.type = "text/javascript";
    adobe.src = "//assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js";
    head.appendChild(adobe);
  }
  </script>
  <script src='/us-en/ontap-metrocluster/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/us-en/ontap-metrocluster/js/toc.js'></script>
  <script src='/us-en/ontap-metrocluster/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          
          var collapseOnInit = true;
          

          var navSettings = {
              "caretHtml": '',
              "accordion": collapseOnInit,
              "openClass": 'active', // open
              "save": false, // leave false or nav highlighting doesn't work right
              "cookie": {
                  "name": 'navgoco',
                  "expires": false,
                  "path": '/'
              },
              "slide": {
                  "duration": 400,
                  "easing": 'swing'
              }
          };

          // Initialize navgoco with default options
          $("#mysidebar").navgoco(navSettings);
          

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class role="document">
    <div id="page" class="n-off-canvas-menu">
      <div class="n-off-canvas-menu__menu"><!--TODO: Add offcanvas code --></div>
      <div class="n-off-canvas-menu__content-wrap">
        <header class="site-header" id="banner">
  <!-- Start top_hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/products-a-z/" class="n-top-hat__link">Product and Solutions</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/support-and-training/netapp-university/" class="n-top-hat__link">Support and Training</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://cloud.netapp.com" class="n-top-hat__link">Cloud Central</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://community.netapp.com/" class="n-top-hat__link">Community</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://blog.netapp.com/" class="n-top-hat__link">Blog</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://customers.netapp.com/en/" class="n-top-hat__link">Customer Stories</a>
          </li>
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
      <div class="n-top-hat__utils">
        <ul class="n-top-hat__list">
          <li class="n-top-hat__list-item">
            <a href="https://www.netapp.com/us/contact-us/index.aspx" target="_self" class="n-top-hat__link" data-ntap-ui="contact-us">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <!-- End top_hat -->

  <!-- Start property bar -->
  <style>
    .n-property-navigation-bar__menus--desktop-experience .n-menu--mega__default-content__heading span {
    color: #34B0FF;
    }
  </style>
  <div class="n-property-bar " data-ntap-ui="sticky-nav">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link">
          <span class="n-property-bar__menu-toggle-text">Menu</span>
          <svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
            <title>bars</title>
            <use xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#bars"></use>
          </svg>
        </a>
      </div>
      <div class="n-property-bar__property-mark ">
        <a href="https://www.netapp.com" class="n-property-bar__property-link">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-icon-netapp-logo n-property-bar__logo-svg" aria-labelledby="title">
              <title>netapp-logo</title>
              <use xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
        </a>
      </div>

      
      <div class="search-property-bar">
        <div id="search-demo-container" class="searchbox n-property-bar__search">
          <div id="react-search" data-type="widget" data-placeholder="Search Documentation" data-no-results-found="No results were found for {query}" data-did-you-mean="Search for {suggestion}." data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?" data-results-found="{hitCount} results found"  ></div>
          <button class="n-property-bar__search-toggle-button" type="button">
            <svg class="n-icon-search n-property-bar__search-toggle-button-icon" aria-labelledby="title">
              <title>search</title>
              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#search"></use>
            </svg>
          </button>
        </div>
      </div>
      
    </div>
  </div>
  <div class="n-property-bar__toolbar"><!-- Start Language Selector --><!-- End Language Selector -->

    <div class="n-property-bar__cta"></div>
  </div>
  <script>
    $(function(){
        var currentLocalization = $('html').attr('lang');

        var localizationsDictionary = {
            "en-CA" : "https://www.netapp.com/search/index.aspx?for_cr=canada&",
            "en-IN" : "https://www.netapp.com/search/index.aspx?for_cr=india&",
            "nl-NL" : "https://www.netapp.com/search/index.aspx?for_cr=netherlands&",
            "ru-RU" : "https://www.netapp.com/search/index.aspx?for_cr=russia&",
            "sv-SE" : "https://www.netapp.com/search/index.aspx?for_cr=sweden&",
            "it-IT" : "https://www.netapp.com/search/index.aspx?for_cr=italy&",
            "he-IL" : "https://www.netapp.com/search/index.aspx?for_cr=israel&",
            "ko-KR" : "https://www.netapp.com/search/index.aspx?for_cr=korea&",
            "zh-TW" : "https://www.netapp.com/search/index.aspx?for_cr=taiwan&",
            "en-GB" : "https://www.netapp.com/search/index.aspx?for_cr=unitedkingdom&",
            "en-SG" : "https://www.netapp.com/search/index.aspx?for_cr=asean&",
            "en-AU" : "https://www.netapp.com/search/index.aspx?for_cr=australia&",
            "pt-BR" : "https://www.netapp.com/search/index.aspx?for_cr=brasil&",
            "de-CH" : "https://www.netapp.com/search/index.aspx?for_cr=switzerland&",
            "es-MX" : "https://www.netapp.com/search/index.aspx?for_cr=mexico&"
        };

        if($('html').hasClass('ntap-whitelisted') && localizationsDictionary.hasOwnProperty(currentLocalization)) {
            $('.n-property-bar__property-link').attr('href', '/');
        }
    });
  </script>
  <!-- End property bar -->
</header>

        <div class="ie-utility">
  <div class="ie-menu">
    <div class="n-breadcrumb">
      <ul class="n-breadcrumb__list">
        <li class="n-breadcrumb__list-item">
          <a href="https://www.netapp.com">Home</a>
        </li>
        <li class="n-breadcrumb__list-item">
          <a href="https://docs.netapp.com">Documentation</a>
        </li>
        

        <li class="n-breadcrumb__list-item">
          <a href="/us-en/ontap-metrocluster/">ONTAP&nbsp;MetroCluster</a>
        </li>
        <li class="n-breadcrumb__list-item">
          Upgrading controllers in a MetroCluster FC configuration using switchover and switchback
        </li>
      </ul>
    </div>

    <div style="clear: both"></div><!-- Main needs to have height -->
  </div>
</div>


        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">
  <!-- Sidebar Column -->
  
  <div class="col-md-3" >
      <div class="n-pdf-header">
  <a id="toggleButtonPdf" class="n-pdf-button" type="button">PDFs<span>
    </span>
  </a>
</div>
<ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><div class="n-pdf-section">
      <span class="n-pdf-section-title">Site</span>
    </div>
    <li>
      <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/fullsite-sidebar/MetroCluster_Documentation.pdf" >
        <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
        MetroCluster Documentation
      </a>
    </li>





    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_a_fabric_attached_MetroCluster.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install a fabric-attached MetroCluster
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_a_fabric_attached_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling a fabric-attached MetroCluster configuration
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Parts_of_a_fabric_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Parts of a fabric MetroCluster configuration
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_MetroCluster_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling MetroCluster components
          </a>
        </li>
        <span>
          






















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_FC_switches.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the FC switches
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_Brocade_FC_switches_with_RCF_files.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring Brocade FC switches with RCF files
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_Cisco_FC_switches_with_RCF_files.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the Cisco FC switches with RCF files
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_hardware_for_sharing_a_Brocade_6510_FC_fabric_during_transition.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring hardware for sharing a Brocade 6510 FC fabric during transition
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_switch_fabrics_sharing_between_the_7_Mode_and_clustered_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring switch fabrics sharing between the 7-Mode and clustered MetroCluster configuration
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Planning_and_installing_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Planning and installing a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_the_MetroCluster_components_in_a_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling the MetroCluster components in a configuration with array LUNs
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_the_FC_VI_and_HBA_ports_in_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling the FC-VI and HBA ports in a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  













    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_storage_arrays_to_FC_switches_in_a_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling storage arrays to FC switches in a MetroCluster configuration
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Switch_zoning_in_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Switch zoning in a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Setting_up_ONTAP_in_a_MetroCluster_configuration_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Setting up ONTAP in a MetroCluster configuration with array LUNs
          </a>
        </li>
        <span>
          




















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Implementing_a_MetroCluster_configuration_with_both_disks_and_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Implementing a MetroCluster configuration with both disks and array LUNs
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Using_the_Active_IQ_Unified_Manager_and_ONTAP_System_Manager_for_further_configuration_and_monitoring.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring
          </a>
        </li>
        <span>
          




          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_a_MetroCluster_IP_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install a MetroCluster IP configuration
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Preparing_for_the_MetroCluster_installation.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Preparing for the MetroCluster installation
          </a>
        </li>
        <span>
          




























          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_MetroCluster_hardware_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the MetroCluster hardware components
          </a>
        </li>
        <span>
          














          
        </span>
      </span>
    

  





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_ONTAP_Mediator_service_for_unplanned_automatic_switchover.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the ONTAP Mediator service for unplanned automatic switchover
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_a_stretch_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install a stretch MetroCluster configuration
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_a_two_node_SAS_attached_stretch_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling a two-node SAS-attached stretch MetroCluster configuration
          </a>
        </li>
        <span>
          





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_MetroCluster_components_for_two_node_SAS_attached_stretch_configurations.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling MetroCluster components for two-node SAS-attached stretch configurations
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Cabling_a_two_node_bridge_attached_stretch_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Cabling a two-node bridge-attached stretch MetroCluster configuration
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_MetroCluster_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling MetroCluster components
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  









    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Connections_in_a_stretch_MetroCluster_configurations_with_array_LUNs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Connections in a stretch MetroCluster configurations with array LUNs
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Using_the_Active_IQ_Unified_Manager_and_ONTAP_System_Manager_for_further_configuration_and_monitoring.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring
          </a>
        </li>
        <span>
          




          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Maintain_the_MetroCluster_components.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Maintain the MetroCluster components
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_FC_to_SAS_bridge_maintenance.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing FC-to-SAS bridge maintenance
          </a>
        </li>
        <span>
          






















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_FC_switch_maintenance_and_replacement.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing FC switch maintenance and replacement
          </a>
        </li>
        <span>
          






















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_IP_switch_maintenance_and_replacement.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing IP switch maintenance and replacement
          </a>
        </li>
        <span>
          










          
        </span>
      </span>
    

  







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Hot_adding_storage_to_a_MetroCluster_FC_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Hot-adding storage to a MetroCluster FC configuration
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Hot_adding_SAS_storage_to_a_bridge_attached_MetroCluster_FC_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Hot-adding SAS storage to a bridge-attached MetroCluster FC configuration
          </a>
        </li>
        <span>
          





    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Hot_adding_a_SAS_disk_shelf_to_a_stack_of_SAS_disk_shelves.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Hot-adding a SAS disk shelf to a stack of SAS disk shelves
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  























    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Port_assignments_for_FC_switches.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Port assignments for FC switches
          </a>
        </li>
        <span>
          








          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  





    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_switchover__healing__and_switchback.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing switchover, healing, and switchback
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Performing_switchover_for_tests_or_maintenance.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Performing switchover for tests or maintenance
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Healing_the_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Healing the configuration
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Healing_the_configuration_in_a_MetroCluster_FC_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Healing the configuration in a MetroCluster FC configuration
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  








          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Install_and_Configure_MetroCluster_Tiebreaker.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Install and Configure MetroCluster Tiebreaker
          </a>
        </li>
        <span>
          




















          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Transition_from_MetroCluster_FC_to_MetroCluster_IP.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Transition from MetroCluster FC to MetroCluster IP
          </a>
        </li>
        <span>
          



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Transitioning_nondisruptively_from_a_MetroCluster_FC_to_a_MetroCluster_IP_configuration__ONTAP_9_8_and_later_.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Transitioning nondisruptively from a MetroCluster FC to a MetroCluster IP configuration (ONTAP 9.8 and later)
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Preparing_for_transition_from_a_MetroCluster_FC_to_a_MetroCluster_IP_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Preparing for transition from a MetroCluster FC to a MetroCluster IP configuration
          </a>
        </li>
        <span>
          
















          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Disruptively_transitioning_from_a_two_node_MetroCluster_FC_to_a_four_node_MetroCluster_IP_configuration__ONTAP_9_8_and_later_.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Disruptively transitioning from a two-node MetroCluster FC to a four-node MetroCluster IP configuration (ONTAP 9.8 and later)
          </a>
        </li>
        <span>
          














          
        </span>
      </span>
    

  














          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Upgrade_or_expand_the_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Upgrade or expand the MetroCluster configuration
          </a>
        </li>
        <span>
          


    <div class="n-pdf-section">
  <span class="n-pdf-section-title">This page</span>
</div>

<li class="active">
  <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/pages/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.pdf" >
    <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
    Upgrading controllers in a MetroCluster FC configuration using switchover and switchback
  </a>
</li>


  









    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Expanding_a_two_node_MetroCluster_FC_configuration_to_a_four_node_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Expanding a two-node MetroCluster FC configuration to a four-node configuration
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Adding_a_new_controller_module_to_each_cluster.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Adding a new controller module to each cluster
          </a>
        </li>
        <span>
          













    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Installing_and_cabling_the_new_controller_module.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Installing and cabling the new controller module
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  

















    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_intercluster_LIFs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring intercluster LIFs
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  












          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Expanding_a_four_node_MetroCluster_FC_configuration_to_an_eight_node_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Expanding a four-node MetroCluster FC configuration to an eight-node configuration
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Recabling_and_zoning_a_switch_fabric_for_the_new_nodes.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Recabling and zoning a switch fabric for the new nodes
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_ONTAP_on_the_new_controllers.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring ONTAP on the new controllers
          </a>
        </li>
        <span>
          











    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_the_clusters_into_a_MetroCluster_configuration.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring the clusters into a MetroCluster configuration
          </a>
        </li>
        <span>
          

    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Configuring_intercluster_LIFs.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Configuring intercluster LIFs
          </a>
        </li>
        <span>
          






          
        </span>
      </span>
    

  
















          
        </span>
      </span>
    

  




          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  










          
        </span>
      </span>
    

  



    
      <span class="subfolders" style="display:none;">
        
          <div class="n-pdf-section">
            <span class="n-pdf-section-title">
              Sections
            </span>
          </div>
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Disaster_Recovery.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Disaster Recovery
          </a>
        </li>
        <span>
          







    
      <span class="subfolders" style="display:none;">
        
        <li>
          <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/sidebar/Recovering_from_a_multi_controller_or_storage_failure.pdf" >
            <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>
            Recovering from a multi-controller or storage failure
          </a>
        </li>
        <span>
          












          
        </span>
      </span>
    

  






          
        </span>
      </span>
    

  




</ul>

<script>
  $("#toggleContainerPdf li.active").parents('li').toggle('display');
  $("#toggleContainerPdf li.active").parents('span.subfolders').toggle('display');
  $("#toggleButtonPdf").click(function () {
    $("#toggleContainerPdf").toggle('display');
  });
</script><ul id="mysidebar" class="nav"><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/index.html">
        MetroCluster
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/releasenotes.html">
        Release Notes
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/index.html">
        <div class="na-navbar-padding"> Install a fabric-attached MetroCluster</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_deciding_whether_to_use_this_guide_fabric_attached_mcc_installation_and_configuration_guide.html">
        Deciding whether to use the Fabric-attached MetroCluster Installation and Configuration Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_prepare_for_the_mcc_installation.html">
        Preparing for the MetroCluster installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_choosing_the_correct_installation_procedure_for_your_configuration_mcc_install.html">
        Choosing the correct installation procedure for your configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_configure_the_mcc_hardware_components_fabric.html">
        <div class="na-navbar-padding"> Cabling a fabric-attached MetroCluster configuration</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_parts_of_a_fabric_mcc_configuration.html">
        <div class="na-navbar-padding"> Parts of a fabric MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_illustration_of_the_local_ha_pairs_in_a_mcc_configuration.html">
        Illustration of the local HA pairs in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_illustration_of_redundant_fc_to_sas_bridges.html">
        Illustration of redundant FC-to-SAS bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_redundant_fc_switch_fabrics.html">
        Redundant FC switch fabrics
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_cluster_peering_network_mcc.html">
        Illustration of the cluster peering network
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_required_mcc_components_and_naming_conventions_fabric_mcc.html">
        Required MetroCluster FC components and naming conventions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_configuration_gathering_worksheet_for_fc_switches_and_fc_to_sas_bridges.html">
        Configuration worksheet for FC switches and FC-to-SAS bridges
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_install_and_cable_the_mcc_components.html">
        <div class="na-navbar-padding"> Installing and cabling MetroCluster components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_rack_the_hardware_components_mcc_fabric_and_ip.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_controller_module_s_fc_vi_hba_ports_to_the_fc_switches_controller_to_fc_sw.html">
        Cabling the new controller module&#8217;s FC-VI and HBA ports to the FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_isl_between_the_mcc_sites_fabric_config.html">
        Cabling the ISLs between MetroCluster sites
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_port_assignments_for_systems_using_two_initiator_ports.html">
        Port assignments for systems using two initiator ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_port_assignments_for_fc_switches_when_using_ontap_9_0.html">
        Port assignments for FC switches when using ONTAP 9.0
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_port_assignments_for_fc_switches_when_using_ontap_9_1_and_later.html">
        Port assignments for FC switches when using ONTAP 9.1 and later
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_interconnect_in_four_node_configurations.html">
        Cabling the cluster interconnect in eight- or four-node configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_ha_interconnect.html">
        Cabling the HA interconnect, if necessary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fcsw_configure_the_fc_switches_choice_topic.html">
        <div class="na-navbar-padding"> Configuring the FC switches</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fcsw_brocade_configure_the_brocade_fc_switches_with_rcf_files.html">
        <div class="na-navbar-padding"> Configuring Brocade FC switches with RCF files</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_reset_the_brocade_fc_switch_to_factory_defaults.html">
        Resetting the Brocade FC switch to factory defaults
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_download_the_brocade_fc_rcf_switch_software.html">
        Downloading the Brocade FC switch RCF file
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_install_the_brocade_fc_switch_rcf_file.html">
        Installing the Brocade FC switch RCF file
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/generaltask_fcsw_cisco_configure_the_cisco_fc_switches_with_rcf_files.html">
        <div class="na-navbar-padding"> Configuring the Cisco FC switches with RCF files</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_reset_the_cisco_fc_switch_to_factory_defaults.html">
        Resetting the Cisco FC switch to factory defaults
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_download_and_install_the_cisco_fc_switch_software.html">
        Downloading and installing the Cisco FC switch NX-OS software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_download_and_install_the_cisco_fc_switch_rcf_files.html">
        Downloading and installing the Cisco FC RCF files
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fcsw_brocade_configure_the_brocade_fc_switches_supertask.html">
        Configuring the Brocade FC switches manually
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fcsw_cisco_configure_a_cisco_switch_supertask.html">
        Configuring the Cisco FC switches nanually
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fb_new_install.html">
        Installing FC-to-SAS bridges and SAS disk shelves
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_configure_the_mcc_hardware_for_share_a_7_mode_brocade_6510_fc_fabric_dure_transition.html">
        <div class="na-navbar-padding"> Configuring hardware for sharing a Brocade 6510 FC fabric during transition</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_fcsw_brocade_reviewing_brocade_license_requirements.html">
        Reviewing Brocade license requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_rack_the_hardware_components_mcc_fabric_and_ip.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_cable_the_new_mcc_controllers_to_the_exist_fc_fabrics.html">
        Cabling the new MetroCluster controllers to the existing FC fabrics
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_configure_a_switch_fabric_for_shar_with_the_7_mode_and_clustered_mcc_configuration.html">
        <div class="na-navbar-padding"> Configuring switch fabrics sharing between the 7-Mode and clustered MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_disable_one_of_the_switch_fabrics.html">
        Disabling one of the switch fabrics
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_configure_zone_and_qos.html">
        Deleting TI zoning and configuring IOD settings
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_ensure_isls_are_in_the_same_port_group_and_configure_zon.html">
        Ensuring ISLs are in the same port group and configuring zoning
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_fmc_mcc_transition_reenable_the_switch_fabric_and_verify_operation.html">
        Reenabling the switch fabric and verify operation
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_configure_the_mcc_software_in_ontap.html">
        Configuring the MetroCluster software in ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.html">
        Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_test_the_mcc_configuration.html">
        Testing the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_when_removing_mcc_configurations.html">
        Considerations when removing MetroCluster configurations
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_planning_and_installing_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Planning and installing a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_planning_for_a_mcc_configuration_with_array_luns.html">
        Planning for a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_supported_mcc_configuration_with_array_luns.html">
        Supported MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_requirements_for_a_mcc_configuration_with_array_luns_reference.html">
        Requirements for a MetroCluster configuration with array LUNs
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_install_and_cable_the_mcc_components_in_a_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Installing and cabling the MetroCluster components in a configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_rack_the_hardware_components_in_a_mcc_configuration_with_array_luns.html">
        Racking the hardware components in a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_prepare_a_storage_array_for_use_with_ontap_systems.html">
        Preparing a storage array for use with ONTAP systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_switch_ports_required_for_a_eight_node_mcc_configuration_with_array_luns.html">
        Switch ports required for a MetroCluster configuration with array LUNs
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_in_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Cabling the FC-VI and HBA ports in a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_to_switches_in_a_two_node_fabric_attached_mcc_configuration_with_array_luns.html">
        Cabling the FC-VI and HBA ports in a two-node fabric-attached MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_to_switches_in_a_four_node_fabric_attached_mcc_configuration_with_array_luns.html">
        Cabling the FC-VI and HBA ports in a four-node fabric-attached MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_fc_vi_and_hba_ports_to_switches_in_an_eight_node_fabric_attached_mcc_configuration_with_array_luns.html">
        Cabling the FC-VI and HBA ports in an eight-node fabric-attached MetroCluster configuration with array LUNs
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_isls_in_a_mcc_configuration_with_array_luns.html">
        Cabling the ISLs in a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_interconnect_in_four_node_configurations.html">
        Cabling the cluster interconnect in eight- or four-node configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_ha_interconnect.html">
        Cabling the HA interconnect, if necessary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_cable_storage_arrays_to_fc_switches_in_a_mcc_configuration.html">
        <div class="na-navbar-padding"> Cabling storage arrays to FC switches in a MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_cabling_array_luns_to_fc_switches_in_a_two_node_mcc_configuration.html">
        Example of cabling storage array ports to FC switches in a two-node MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_cabling_array_luns_to_fc_switches_in_a_four_node_mcc_configuration.html">
        Example of cabling storage array ports to FC switches in a four-node MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_cabling_array_luns_to_fc_switches_in_an_eight_node_mcc_configuration.html">
        Example of cabling storage array ports to FC switches in an eight-node MetroCluster configuration
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_switch_zoning_in_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Switch zoning in a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_requirements_for_switch_zoning_in_a_mcc_configuration_with_array_luns.html">
        Requirements for switch zoning in a MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_switch_zoning_in_a_two_node_mcc_configuration_with_array_luns.html">
        Example of switch zoning in a two-node MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_switch_zoning_in_a_four_node_mcc_configuration_with_array_luns.html">
        Example of switch zoning in a four-node MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_switch_zoning_in_an_eight_node_mcc_configuration_with_array_luns.html">
        Example of switch zoning in an eight-node MetroCluster configuration with array LUNs
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/task_configure_ontap_in_a_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Setting up ONTAP in a MetroCluster configuration with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_verify_the_ha_state_of_components_is_mcc_or_mcc_2n_in_maintenance_mode.html">
        Verifying and configuring the HA state of components in Maintenance mode
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_configure_ontap_on_a_system_that_uses_only_array_luns.html">
        Configuring ONTAP on a system that uses only array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_setting_up_the_cluster.html">
        Setting up the cluster
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_install_the_license_for_us_array_luns_in_a_mcc_configuration.html">
        Installing the license for using array LUNs in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_configure_fc_vi_ports_on_a_x1132a_r6_quad_port_card.html">
        Configuring FC-VI ports on a X1132A-R6 quad-port card on FAS8020 systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_assign_ownership_of_array_luns.html">
        Assigning ownership of array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_peer_the_clusters_mcc_with_array_luns.html">
        Peering the clusters
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_mirror_the_root_aggregates_mcc_with_array_luns.html">
        Mirroring the root aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_create_data_aggregates_and_implement_the_configuration_mcc_with_array_luns.html">
        Creating data aggregates on, implementing, and verifying the MetroCluster configuration
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_implementing_a_mcc_configuration_with_both_disks_and_array_luns.html">
        <div class="na-navbar-padding"> Implementing a MetroCluster configuration with both disks and array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_for_implementing_a_mcc_configuration_with_disks_and_array_luns.html">
        Considerations when implementing a MetroCluster configuration with disks and array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_example_of_a_two_node_fabric_attached_mcc_configuration_with_disks_and_array_luns.html">
        Example of a two-node fabric-attached MetroCluster configuration with disks and array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_example_of_a_four_node_mcc_configuration_with_disks_and_array_luns.html">
        Example of a four-node MetroCluster configuration with disks and array LUNs
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-fc/concept_using_the_oncommand_management_tools_for_further_configuration_and_monitoring.html">
        <div class="na-navbar-padding"> Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/task_synchronize_the_system_time_us_ntp.html">
        Synchronizing the system time using NTP
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/concept_considerations_when_using_ontap_in_a_mcc_configuration.html">
        Considerations when using ONTAP in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-fc/reference_where_to_find_additional_information_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/index.html">
        <div class="na-navbar-padding"> Install a MetroCluster IP configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_deciding_whether_to_use_this_guide_mcc_ip_installation_and_configuration_guide.html">
        Deciding whether to use the MetroCluster IP Installation and Configuration Guide
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/concept_prepare_for_the_mcc_installation.html">
        <div class="na-navbar-padding"> Preparing for the MetroCluster installation</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_differences.html">
        Differences among the ONTAP MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_mediator.html">
        Deciding between ONTAP Mediator and MetroCluster Tiebreaker
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_mcip.html">
        Considerations for MetroCluster IP configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_drive_assignment.html">
        Automatic drive assignment and ADP systems in ONTAP 9.4 and later
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_peering.html">
        Cluster peering
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_isls.html">
        ISL requirements
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_layer_3.html">
        Using layer 3 wide-area networks
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_layer_2.html">
        Sharing private layer 2 networks
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_mc_compliant_switches.html">
        Using MetroCluster-compliant switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_tdm_encryption.html">
        Using TDM/xWDM and encryption equipment with MetroCluster IP configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_unmirrored_aggrs.html">
        Unmirrored aggregates in a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_firewalls.html">
        Firewall usage at MetroCluster sites
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.html">
        Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/task_configure_the_mcc_hardware_components_mcc_ip.html">
        <div class="na-navbar-padding"> Configuring the MetroCluster hardware components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_parts_of_an_ip_mcc_configuration_mcc_ip.html">
        Parts of a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_required_mcc_ip_components_and_naming_guidelines_mcc_ip.html">
        Required MetroCluster IP components and naming conventions
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_rack_hw_components.html">
        Rack the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_cable_ip_switches.html">
        Cable the MetroCluster IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_cable_other_connections.html">
        Cable the controller data and management ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_install_and_cable_the_mcc_components.html">
        Configure the MetroCluster IP switches
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_configure_the_mcc_software_in_ontap.html">
        Configuring the MetroCluster software in ONTAP
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-ip/concept_configure_the_ontap_mediator_for_unplanned_automatic_switchover.html">
        <div class="na-navbar-padding"> Configuring the ONTAP Mediator service for unplanned automatic switchover</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_mediator_requirements.html">
        Preparing to install the ONTAP Mediator service
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_install_configure_mediator.html">
        Installing or upgrading the ONTAP Mediator service
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_configuring_the_ontap_mediator_service_from_a_metrocluster_ip_configuration.html">
        Configuring the ONTAP Mediator service from a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_connecting_mcc_to_different_mediator_instance.html">
        Connecting a MetroCluster configuration to a different ONTAP Mediator instance
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_changing_mediator_password.html">
        Changing the ONTAP Mediator password
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_changing_mediator_username.html">
        Changing the ONTAP Mediator user name
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_uninstall_mediator.html">
        Uninstalling the ONTAP Mediator service
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/task_test_the_mcc_configuration.html">
        Testing the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_when_removing_mcc_configurations.html">
        Considerations when removing MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/concept_considerations_when_using_ontap_in_a_mcc_configuration.html">
        Considerations when using ONTAP in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-ip/reference_where_to_find_additional_information_mccip_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/index.html">
        <div class="na-navbar-padding"> Install a stretch MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_deciding_whether_to_use_this_guide_stretch_mcc_installation_and_configuration_guide.html">
        Deciding whether to use the Stretch MetroCluster Installation and Configuration Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_preparing_for_the_mcc_installation.html">
        Preparing for the MetroCluster installation
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_choosing_the_correct_installation_procedure_for_your_configuration_mcc_install.html">
        Choosing the correct installation procedure for your configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/task_configure_the_mcc_hardware_components_2_node_stretch_sas.html">
        <div class="na-navbar-padding"> Cabling a two-node SAS-attached stretch MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_parts_of_a_two_node_sas_attached_stretch_mcc_configuration.html">
        Parts of a two-node SAS-attached stretch MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_required_mcc_components_and_example_names_for_two_node_sas_attached_stretch_configurations_mcc.html">
        Required MetroCluster hardware components and naming guidelines for two-node SAS-attached stretch configurations
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/reference_sas_optical_mc_configuring_a_stretch_mcc_system_with_sas_disk_shelves_and_sas_optical_cables.html">
        <div class="na-navbar-padding"> Installing and cabling MetroCluster components for two-node SAS-attached stretch configurations</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_rack_the_hardware_components_2_node_stretch_sas.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_controllers_to_each_other_and_the_storage_shelves.html">
        Cabling the controllers to each other and the storage shelves
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li></ul></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/task_configure_the_mcc_hardware_components_2_node_stretch_atto.html">
        <div class="na-navbar-padding"> Cabling a two-node bridge-attached stretch MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_parts_of_a_two_node_mcc_configuration_using_fc_to_sas_bridges.html">
        Parts of a two-node bridge-attached stretch MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_required_mcc_components_and_naming_conventions_for_two_node_bridge_attached_stretch_configurations_mcc.html">
        Required MetroCluster hardware components and naming conventions for two-node bridge-attached stretch configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_information_gathering_worksheet_for_fc_to_sas_bridges_2_node_atto.html">
        Information gathering worksheet for FC-to-SAS bridges
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/task_install_and_cable_the_mcc_components.html">
        <div class="na-navbar-padding"> Installing and cabling MetroCluster components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_rack_the_hardware_components_mcc_2_node_stretch_atto.html">
        Racking the hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_fc_vi_adapters_to_the_partner_controller_2_node_stretch_atto.html">
        Cabling the controllers to each other
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_cluster_peering_connections.html">
        Cabling the cluster peering connections
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_cable_the_management_and_data_connections.html">
        Cabling the management and data connections
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_fb_new_install.html">
        Installing FC-to-SAS bridges and SAS disk shelves
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_configuring_the_mcc_software_in_ontap.html">
        Configuring the MetroCluster software in ONTAP
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_considerations_for_using_virtual_ip_and_border_gateway_protocol_with_a_mcc_configuration.html">
        Considerations for using virtual IP and Border Gateway Protocol with a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_test_the_mcc_configuration.html">
        Testing the MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/concept_stretch_mcc_configuration_with_array_luns.html">
        <div class="na-navbar-padding"> Connections in a stretch MetroCluster configurations with array LUNs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_example_of_a_stretch_mcc_configuration_with_array_luns.html">
        Example of a stretch MetroCluster configuration with array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_examples_of_two_node_stretch_mcc_configurations_with_disks_and_array_luns.html">
        Examples of two-node stretch MetroCluster configurations with disks and array LUNs
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_example_of_a_stretch_mcc_configuration_with_e_series_storage_arrays.html">
        Example of a stretch MetroCluster configuration with E-Series storage arrays
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_considerations_when_removing_mcc_configurations.html">
        Considerations when removing MetroCluster configurations
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/install-stretch/concept_using_the_oncommand_management_tools_for_further_configuration_and_monitoring.html">
        <div class="na-navbar-padding"> Using the Active IQ Unified Manager and ONTAP System Manager for further configuration and monitoring</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_synchronize_the_system_time_us_ntp.html">
        Synchronizing the system time using NTP
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/concept_considerations_when_using_ontap_in_a_mcc_configuration.html">
        Considerations when using ONTAP in a MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/task_upgrade_the_configuration_to_fabric_attached_mcc.html">
        Transitioning from a stretch to a fabric-attached MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/install-stretch/reference_where_to_find_additional_information_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/index.html">
        <div class="na-navbar-padding"> Maintain the MetroCluster components</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_deciding_whether_to_use_this_guide_mcc_service_guide.html">
        Deciding whether to use the MetroCluster Maintenance Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_where_to_find_procedures_for_mcc_maintenance_tasks.html">
        Where to find procedures for MetroCluster maintenance tasks
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_mcc_failure_scenarios.html">
        MetroCluster failure and recovery scenarios
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_performing_fc_to_sas_bridge_maintenance.html">
        <div class="na-navbar-padding"> Performing FC-to-SAS bridge maintenance</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_using_fibrebridge_7600n_bridges_in_mcc_configurations.html">
        Support for FibreBridge 7600N bridges in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_using_fibrebridge_7500n_bridges_in_mcc_configurations.html">
        Support for FibreBridge 7500N bridges in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_enable_ip_port_access_on_the_fibrebridge_7600n_bridge_guides.html">
        Enabling IP port access on the FibreBridge 7600N bridge if necessary
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_update_firmware_on_a_fibrebridge_bridge_parent_topic.html">
        Updating firmware on a FibreBridge bridge
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_sle_fc_to_sas_bridge.html">
        Replacing a single FC-to-SAS bridge
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_consolidate_replace_a_pair_of_fibrebridge_6500n_bridges_with_7500n_bridges.html">
        Replacing a pair of FibreBridge 6500N bridges with 7600N or 7500N bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_requirements_for_using_other_interfaces_to_configure_and_manage_fibrebridge_bridges.html">
        Requirements for using other interfaces to configure and manage FibreBridge bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_fb_replace_a_power_supply.html">
        Hot-replacing a failed power supply module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_in_band_management_of_the_fc_to_sas_bridges.html">
        In-band management of the FC-to-SAS bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_secur_or_unsecur_a_fibrebridge_bridge.html">
        Securing or unsecuring the FibreBridge bridge
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_performing_fc_switch_maintenance.html">
        <div class="na-navbar-padding"> Performing FC switch maintenance and replacement</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_or_downgrad_the_firmware_on_a_brocade_fc_switch_mcc.html">
        Upgrading or downgrading the firmware on a Brocade FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_or_downgrad_the_firmware_on_a_cisco_fc_switch_mcc.html">
        Upgrading or downgrading the firmware on a Cisco FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_to_new_brocade_switches.html">
        Upgrading to new Brocade FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_brocade_fc_switch_mcc.html">
        Replacing a Brocade FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_rename_a_brocade_fc_switch.html">
        Renaming a Brocade FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_disable_encryption_on_brocade_fc_switches.html">
        Disabling encryption on Brocade FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_change_isl_properties_isl_ports_or_the_iod_ood_configuration_on_a_brocade_switch.html">
        Changing ISL properties, ISL ports, or the IOD/OOD configuration on a Brocade switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_cisco_fc_switch_mcc.html">
        Replacing a Cisco FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_change_speed_of_isl_ports_on_a_cisco_fc_switch.html">
        Changing speed of ISL ports on a Cisco FC switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_add_lsls_to_a_cisco_fc_switch.html">
        Adding lSLs to a Cisco switch
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_performing_ip_switch_maintenance.html">
        <div class="na-navbar-padding"> Performing IP switch maintenance and replacement</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_an_ip_switch.html">
        Replacing an IP switch
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_firmware_on_mcc_ip_switches.html">
        Upgrading firmware on MetroCluster IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_upgrade_rcf_files_on_mcc_ip_switches.html">
        Upgrading RCF files on MetroCluster IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_rename_a_cisco_ip_switch.html">
        Renaming a Cisco IP switch
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_add_remove_or_change_isl_ports_nondisruptively.html">
        Adding, removing, or changing ISL ports nondisruptively
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_identifying_storage_in_a_mcc_ip_configuration.html">
        Identifying storage in a MetroCluster IP configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/task_hot_add_storage_to_a_mcc_fc_configuration_container_topic.html">
        <div class="na-navbar-padding"> Hot-adding storage to a MetroCluster FC configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_add_a_sas_disk_shelf_in_a_direct_attached_mcc_configuration_us_sas_optical_cables.html">
        Hot-adding a SAS disk shelf in a direct-attached MetroCluster FC configuration using SAS optical cables
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_atto_mc_hot_adding_storage_shelves_to_a_bridge_attached_mcc_configuration.html">
        <div class="na-navbar-padding"> Hot-adding SAS storage to a bridge-attached MetroCluster FC configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_add_a_stack_to_exist_7500n_pair.html">
        Hot-adding a stack of SAS disk shelves to an existing pair of FibreBridge 7500N bridges
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_stack_of_shelves_and_bridges.html">
        Hot-adding a stack of SAS disk shelves and bridges to a MetroCluster system
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_shelf.html">
        <div class="na-navbar-padding"> Hot-adding a SAS disk shelf to a stack of SAS disk shelves</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_shelf_prepare_7500n.html">
        Preparing to hot-add SAS disk shelves
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_fb_hot_add_a_disk_shelf_install_7500n.html">
        Hot-adding a disk shelf
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_add_an_iom12_disk_shelf_to_a_stack_of_iom6_disk_shelves.html">
        Hot-adding an IOM12 disk shelf to a stack of IOM6 disk shelves in a bridge-attached MetroCluster configuration
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_hot_remove_storage_from_a_mcc_fc_configuration.html">
        Hot-removing storage from a MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_shelf_nondisruptively_in_a_stretch_mcc_configuration.html">
        Replacing a shelf nondisruptively in a stretch MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_replace_a_shelf_nondisruptively_in_a_mcc_fc_configuration.html">
        Replacing a shelf nondisruptively in a fabric-attached MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_migrating_root_volumes_to_a_new_destination.html">
        When to migrate root volumes to a new destination
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_move_a_metadata_volume_in_mcc_configurations.html">
        Moving a metadata volume in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_rename_the_cluster_for_mcc_configuration.html">
        Renaming a cluster in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_power_on_and_power_off_a_data_center.html">
        Powering off and powering on a data center
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_power_off_an_entire_mcc_ip_configuration.html">
        Powering off an entire MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_power_off_an_entire_mcc_fc_configuration.html">
        Powering off an entire MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/task_do_not_use_for_9_8_and_later_reconfigure_the_fc_switch_layout_for_ontap_9_1_or_later.html">
        Reconfiguring an FC switch layout configured before ONTAP 9.x
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_fc_switches_parent_topic.html">
        <div class="na-navbar-padding"> Port assignments for FC switches</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_systems_using_two_initiator_ports.html">
        Port assignments for systems using two initiator ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_fc_switches_when_using_ontap_9_0.html">
        Port assignments for FC switches when using ONTAP 9.0
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_port_assignments_for_fc_switches_when_using_ontap_9_1_and_later.html">
        Port assignments for FC switches when using ONTAP 9.1 and later
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/concept_using_the_interoperability_matrix_tool_to_find_mcc_information.html">
        Using the Interoperability Matrix Tool to find MetroCluster information
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/maintain/reference_where_to_find_additional_information_mcc_service_guide.html">
        Where to find additional information
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_understanding_mcc_data_protection_and_disaster_recovery.html">
        Understanding MetroCluster data protection and disaster recovery
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/index.html">
        <div class="na-navbar-padding"> Performing switchover, healing, and switchback</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/task_perform_switchover_for_tests_or_maintenance.html">
        <div class="na-navbar-padding"> Performing switchover for tests or maintenance</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_verifiy_that_your_system_is_ready_for_a_switchover.html">
        Verifying that your system is ready for a switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_send_a_custom_autosupport_message_prior_to_negotiated_switchover.html">
        Sending a custom AutoSupport message prior to negotiated switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_perform_a_negotiated_switchover.html">
        Performing a negotiated switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_output_for_storage_aggregate_plex_show_after_a_mcc_switchover.html">
        Output for the storage aggregate plex show command is indeterminate after a MetroCluster switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_confirm_that_dr_partners_have_come_online.html">
        Confirming that the DR partners have come online
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/task_heal_the_configuration_choice_task.html">
        <div class="na-navbar-padding"> Healing the configuration</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/manage/task_heal_the_configuration_in_a_mcc_fc_configuration_supertask.html">
        <div class="na-navbar-padding"> Healing the configuration in a MetroCluster FC configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_heal_the_data_aggregates_after_negotiated_switchover.html">
        Healing the data aggregates after negotiated switchover
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_heal_the_root_aggregates_after_negotiated_switchover.html">
        Healing the root aggregates after negotiated switchover
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_heal_the_configuration_in_a_mcc_ip_configuration_ontap_9_4_and_earlier.html">
        Healing the configuration in a MetroCluster IP configuration (ONTAP 9.4 and earlier)
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_perform_a_switchback.html">
        Performing a switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/task_verify_a_successful_switchback.html">
        Verifying a successful switchback
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/reference_commands_for_switchover_healing_and_switchback.html">
        Commands for switchover, healing, and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_monitoring_the_mcc_configuration.html">
        Monitoring the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/concept_monitoring_and_protecting_database_validity_by_using_nvfail.html">
        Monitoring and protecting the file system consistency using NVFAIL
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/manage/reference_where_to_find_additional_information_dr_guide.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/tiebreaker/index.html">
        <div class="na-navbar-padding"> Install and Configure MetroCluster Tiebreaker</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_deciding_whether_to_use_this_guide_mcc_tiebreaker_installation_and_configuration_guide.html">
        Deciding whether to use the MetroCluster Tiebreaker Software Installation and Configuration Guide
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_overview_of_the_tiebreaker_software.html">
        Overview of the Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/task_install_the_tiebreaker_software.html">
        Installing the Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_configuring_the_tiebreaker_software.html">
        Configuring the Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/task_configure_snmp_setts_for_tiebreaker_software.html">
        Configuring SNMP settings for Tiebreaker software
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_monitoring_the_mcc_configuration.html">
        Monitoring the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/concept_risks_and_limitation_of_using_mcc_tiebreaker_in_active_mode.html">
        Risks and limitations of using MetroCluster Tiebreaker in active mode
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/reference_firewall_requirements_for_mcc_tiebreaker.html">
        Firewall requirements for MetroCluster Tiebreaker
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/tiebreaker/reference_where_to_find_additional_information_tb_icg.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/index.html">
        <div class="na-navbar-padding"> Transition from MetroCluster FC to MetroCluster IP</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_supported_platforms_for_transition.html">
        Supported platforms for nondisruptive transition
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/concept_nondisruptively_transitioning_from_a_four_node_mcc_fc_to_a_mcc_ip_configuration.html">
        <div class="na-navbar-padding"> Transitioning nondisruptively from a MetroCluster FC to a MetroCluster IP configuration (ONTAP 9.8 and later)</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/concept_preparing_for_transitioning_from_mcc_fc_to_an_mcc_ip_configuration.html">
        <div class="na-navbar-padding"> Preparing for transition from a MetroCluster FC to a MetroCluster IP configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_requirements_for_fc_to_ip_transition_mcc.html">
        Requirements for nondisruptive FC-to-IP transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_how_transition_impacts_the_mcc_hardware_components.html">
        How transition impacts the MetroCluster hardware components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_transition_workflow_fc_to_ip_transition.html">
        Workflow for nondisruptive MetroCluster transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_considerations_for_using_existing_ip_switches.html">
        Considerations for IP switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_switchover_and_switchback_operations_during_transition.html">
        Switchover, healing, and switchback operations during nondisruptive transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_mcc_operation_during_transition.html">
        Alert messages and tool support during transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_example_naming_in_this_procedure_mcc_ip_transition.html">
        Example naming in this procedure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_transition_from_mcc_fc_to_mcc_ip_configurations.html">
        Transitioning from MetroCluster FC to MetroCluster IP configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_send_a_custom_autosupport_message_after_maintenance_4n_nondisruptive_mcc_transition.html">
        Sending a custom AutoSupport message after maintenance
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_restore_tiebreaker_monitor_4n_nondisruptive_mcc_transition.html">
        Restoring Tiebreaker or Mediator monitoring
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/transition/task_disruptively_transition_from_a_two_node_mcc_fc_to_a_four_node_mcc_ip_configuration.html">
        <div class="na-navbar-padding"> Disruptively transitioning from a two-node MetroCluster FC to a four-node MetroCluster IP configuration (ONTAP 9.8 and later)</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_example_naming_in_this_procedure_2n_mcc_transition_disruptive.html">
        Example naming in this procedure
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/concept_requirements_for_fc_to_ip_transition_2n_mcc_transition.html">
        Preparing for disruptive FC-to-IP transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_transition_the_mcc_fc_nodes_2n_mcc_transition_supertask.html">
        Transitioning the MetroCluster FC nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_connect_the_mcc_ip_controller_modules_2n_mcc_transition_supertask.html">
        Connecting the MetroCluster IP controller modules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_configure_the_new_nodes_and_complete_transition.html">
        Configuring the new nodes and completing transition
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_return_the_system_to_normal_operation_2n_mcc_transition_supertask.html">
        Returning the system to normal operation
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_disruptively_transition_while_move_volumes_from_old_shelves_to_new_shelves.html">
        Disruptively transitioning from MetroCluster FC to MetroCluster IP when retiring storage shelves (ONTAP 9.8 and later)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_disruptively_transition_when_exist_shelves_are_not_supported_on_new_controllers.html">
        Disruptively transitioning when existing shelves are not supported on new controllers (ONTAP 9.8 and later)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_move_an_fc_san_workload_from_mcc_fc_to_mcc_ip_nodes.html">
        Moving an FC SAN workload from MetroCluster FC to MetroCluster IP nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/task_move_linux_iscsi_hosts_from_mcc_fc_to_mcc_ip_nodes.html">
        Moving Linux iSCSI hosts from MetroCluster FC to MetroCluster IP nodes
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/transition/reference_where_to_find_additional_information_mcc_ug.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/index.html">
        <div class="na-navbar-padding"> Upgrade or expand the MetroCluster configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/concept_choosing_an_upgrade_method_mcc.html">
        Choosing an upgrade or refresh method
      </a></li><li class="  active "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html">
        Upgrading controllers in a MetroCluster FC configuration using switchover and switchback
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_upgrade_controllers_in_a_four_node_ip_mcc_us_switchover_and_switchback_mcc_ip.html">
        Upgrading controllers in a MetroCluster IP configuration using switchover and switchback (ONTAP 9.8 and later)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_refresh_4n_mcc_fc.html">
        Refreshing a four-node MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_refresh_4n_mcc_ip.html">
        Refreshing a four-node MetroCluster IP configuration (ONTAP 9.8 and later)
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_expand_a_two_node_mcc_fc_configuration_to_a_four_node_fc_configuration_supertask.html">
        <div class="na-navbar-padding"> Expanding a two-node MetroCluster FC configuration to a four-node configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_the_state_of_the_mcc_configuration_mcc_expansion.html">
        Verifying the state of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_send_a_custom_autosupport_message_before_add_nodes_to_the_mcc_configuration_2_node_to_4_node.html">
        Sending a custom AutoSupport message before adding nodes to the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_zone_for_the_new_controller_ports_in_a_fabric_attached_mcc_configuration_four_node_expansion.html">
        Zoning for the new controller ports when adding a controller module in a fabric-attached MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_add_a_new_controller_to_each_cluster_mcc_expansion.html">
        <div class="na-navbar-padding"> Adding a new controller module to each cluster</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_prepare_for_the_upgrade_add_2nd_controller_to_create_ha_pair.html">
        Preparing for the upgrade
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_clear_the_configuration_on_a_controller_module_mcc.html">
        Clearing the configuration on a controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_prepare_cluster_ports_on_the_exist_controller.html">
        Preparing cluster ports on an existing controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_prepare_the_netboot_server_cluster_mode.html">
        Preparing the netboot server to download the image
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_enable_the_ha_mode_on_the_exist_controller_mcc_when_add_a_2nd_controller.html">
        Setting the HA mode on the existing controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_shut_down_the_exist_controller_when_add_a_2nd_controller_in_c_mode.html">
        Shutting down the existing controller module
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_install_and_cable_the_new_controller.html">
        <div class="na-navbar-padding"> Installing and cabling the new controller module</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_cable_the_controller_module_s_fc_vi_hba_ports_to_the_fc_switches_controller_to_fc_sw.html">
        Cabling the new controller module&#8217;s FC-VI and HBA ports to the FC switches
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_cable_the_cluster_peering_connections.html">
        Cabling the new controller module&#8217;s cluster peering connections
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_power_up_both_controller_modules_and_display_the_loader_prompt_2_node_mcc_expansion.html">
        Powering up both controller modules and displaying the LOADER prompt
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_change_the_ha_config_setts_mcc_add_a_2nd_controller.html">
        Changing the ha-config setting on the existing and new controller modules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_set_the_partner_system_id_for_both_controller_modules.html">
        Setting the partner system ID for both controller modules
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_boot_the_exist_controller_module.html">
        Booting the existing controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_assign_disks_to_the_new_controller_mcc_expansion.html">
        Assigning disks to the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_netboot_and_set_up_ontap_on_the_new_controller_module_mcc.html">
        Netbooting and setting up ONTAP on the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_mirror_the_root_aggregates_mcc_expansion_procedure.html">
        Mirroring the root aggregate on the new controller
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs.html">
        <div class="na-navbar-padding"> Configuring intercluster LIFs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_use_dedicated_intercluster_ports.html">
        Configuring intercluster LIFs on dedicated ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_share_data_ports.html">
        Configuring intercluster LIFs on shared data ports
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_create_a_mirrored_data_aggregate_on_each_node_mcc.html">
        Creating a mirrored data aggregate on each node
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_install_licenses_on_the_new_controller_module_cluster_mode.html">
        Installing licenses for the new controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_create_unmirrored_data_aggregates_mcc.html">
        Creating unmirrored data aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_install_firmware_after_add_a_controller_module.html">
        Installing the firmware after adding a controller module
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_refresh_the_mcc_configuration_mcc_configure_refresh.html">
        Refreshing the MetroCluster configuration with new controllers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_enable_storage_failover_both_controller_modules_and_set_cluster_ha.html">
        Enabling storage failover on both controller modules and enabling cluster HA
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_restart_the_svms.html">
        Restarting the SVMs
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_expand_a_four_node_mcc_fc_configuration_to_an_eight_node_configuration.html">
        <div class="na-navbar-padding"> Expanding a four-node MetroCluster FC configuration to an eight-node configuration</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_determin_the_new_cable_layout_mcc_expansion.html">
        Determining the new cabling layout
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_rack_the_new_equipment_mcc_expansion.html">
        Racking the new equipment
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_the_health_of_the_mcc_configuration.html">
        Verifying the health of the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_check_for_mcc_configuration_errors_with_config_advisor.html">
        Checking for MetroCluster configuration errors with Config Advisor
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_send_a_custom_autosupport_message_before_add_nodes_to_the_mcc_configuration.html">
        Sending a custom AutoSupport message prior to adding nodes to the MetroCluster configuration
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_recable_and_zone_a_switch_fabric_mcc_expansion.html">
        <div class="na-navbar-padding"> Recabling and zoning a switch fabric for the new nodes</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_disconnect_the_exist_dr_group_mcc_expansion.html">
        Disconnecting the existing DR group from the fabric
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_apply_the_rcf_files_and_recable_the_switches.html">
        Applying the RCF files and recabling the switches
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_ontap_on_the_new_controllers_mcc_expansion.html">
        <div class="na-navbar-padding"> Configuring ONTAP on the new controllers</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_clear_the_configuration_on_a_controller_module_mcc.html">
        Clearing the configuration on a controller module
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_assign_disk_ownership_in_aff_systems_mcc.html">
        Assigning disk ownership in AFF systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_assign_disk_ownership_to_non_aff_systems_mcc.html">
        Assigning disk ownership in non-AFF systems
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_that_the_ha_state_of_components_is_mcc_dr_smok_crater_or_mcc_expansion.html">
        Verifying the ha-config state of components
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_boot_the_new_controllers_and_join_them_to_the_cluster.html">
        Booting the new controllers and joining them to the cluster
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_the_clusters_into_a_mcc_configuration.html">
        <div class="na-navbar-padding"> Configuring the clusters into a MetroCluster configuration</div>
      </a>
      <ul><li class="subfolders "><a href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs.html">
        <div class="na-navbar-padding"> Configuring intercluster LIFs</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_use_dedicated_intercluster_ports.html">
        Configuring intercluster LIFs on dedicated ports
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_intercluster_lifs_to_share_data_ports.html">
        Configuring intercluster LIFs on shared data ports
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_mirror_the_root_aggregates_mcc.html">
        Mirroring the root aggregates
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_implement_the_mcc_configuration_mcc_refresh_mcc_expansion.html">
        Implementing the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_create_a_mirrored_data_aggregate_on_each_node_mcc.html">
        Creating a mirrored data aggregate on each node
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_configure_the_fc_to_sas_bridges_for_health_monitor.html">
        Configuring FC-to-SAS bridges for health monitoring
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_move_a_metadata_volume_in_mcc_configurations.html">
        Moving a metadata volume in MetroCluster configurations
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_check_the_mcc_configuration.html">
        Checking the MetroCluster configuration
      </a></li></ul></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_check_for_mcc_configuration_errors_with_config_advisor.html">
        Checking for MetroCluster configuration errors with Config Advisor
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_send_a_custom_autosupport_message_after_add_nodes_to_the_mcc_configuration.html">
        Sending a custom AutoSupport message after to adding nodes to the MetroCluster configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_verify_switchover_heal_and_switchback.html">
        Verifying switchover, healing, and switchback
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/task_expand_a_four_node_mcc_ip_configuration.html">
        Expanding a four-node MetroCluster IP configuration to an eight-node configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/concept_removing_a_disaster_recovery_group.html">
        Removing a Disaster Recovery group
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/upgrade/reference_where_to_find_additional_information_mcc_ug.html">
        Where to find additional information
      </a></li></ul></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/disaster-recovery/index.html">
        <div class="na-navbar-padding"> Disaster Recovery</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/concept_dr_workflow.html">
        Workflow for disaster recovery
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_perform_a_forced_switchover_after_a_disaster.html">
        Performing a forced switchover after a disaster
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/concept_choosing_the_correct_recovery_procedure_parent_concept.html">
        Choosing the correct recovery procedure
      </a></li><li class="subfolders "><a href="/us-en/ontap-metrocluster/disaster-recovery/task_recover_from_a_multi_controller_and_or_storage_failure.html">
        <div class="na-navbar-padding"> Recovering from a multi-controller or storage failure</div>
      </a>
      <ul><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_replace_hardware_and_boot_new_controllers.html">
        Replacing hardware and booting new controllers
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_prepare_for_switchback_in_a_mcc_ip_configuration_supertask.html">
        Preparing for switchback in a MetroCluster IP configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_prepare_for_switchback_in_a_mcc_fc_configuration_supertask.html">
        Preparing for switchback in a MetroCluster FC configuration
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_prepare_the_nodes_for_switchback_in_a_mixed_configuration.html">
        Preparing the nodes for switchback in a mixed configuration (recovery during transition)
      </a></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_complete_recovery.html">
        Completing recovery
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/disaster-recovery/task_recover_from_a_non_controller_failure_mcc_dr.html">
        Recovering from a non-controller failure
      </a></li></ul></li><li class=" "><a class="na-navbar-padding" href="/us-en/ontap-metrocluster/reference_legal_notices.html">
        Legal notices
      </a></li></ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

  </div>
  

  <div class="ie-content-pane n-doc__component-detail-content n-doc__component-detail-content--show-code">
    <!-- Begin of page container -->
    <article class="page-content">
      



<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Upgrading controllers in a MetroCluster FC configuration using switchover and switchback</h1>
</div>


<p class="page-details">
  
    
    <time datetime="2021-04-19 12:49:50 +0000">04/19/2021</time>
    
  


  <span>
    <a target="_blank" href="/us-en/ontap-metrocluster/pdfs/pages/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.pdf" role="button">
      <img src="/us-en/ontap-metrocluster/images/pdf.png" width="20" height="20"/>Download PDF of this page</a>
  </span>


</p>


<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>You can use the MetroCluster switchover operation to provide nondisruptive service to clients while the controller modules on the partner cluster are upgraded. Other components (such as storage shelves or switches) cannot be upgraded as part of this procedure.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can use this procedure only for controller upgrade.</p>
<div class="paragraph">
<p>Other components in the configuration, such as storage shelves or switches, cannot be upgraded at the same time.</p>
</div>
</li>
<li>
<p>You can use this procedures with certain ONTAP versions:</p>
<div class="ulist">
<ul>
<li>
<p>Two-node configurations are supported in ONTAP 9.3 and later.</p>
</li>
<li>
<p>Four and eight node configurations are supported in ONTAP 9.8 and later.</p>
<div class="paragraph">
<p>Do not use this procedure on four- or eight-node configurations running ONTAP versions prior to 9.8.</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Your original and new platforms must be compatible and supported.</p>
<div class="paragraph">
<p><a href="https://hwu.netapp.com">NetApp Hardware Universe</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the original or new platforms are 8020 systems using ports 1c / 1d in FC-VI mode, contact technical support.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>This procedure applies to controller modules in a MetroCluster FC configuration (a two-node stretch MetroCluster or a two or four-node fabric-attached MetroCluster configuration).</p>
</li>
<li>
<p>All controllers in the configuration should be upgraded during the same maintenance period.</p>
<div class="paragraph">
<p>Operating the MetroCluster configuration with different controller types is not supported outside of this maintenance activity.</p>
</div>
</li>
<li>
<p>The supported upgrade path depends on the original platform model.</p>
<div class="paragraph">
<p>Platform models with internal shelves are not supported.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Old platform model</th>
<th class="tableblock halign-left valign-top">New platform model</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>FAS80xx</p>
</li>
<li>
<p>FAS8200</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>FAS8300</p>
</li>
<li>
<p>FAS8700</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>AFF A300</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>AFF A400</p>
</li>
<li>
<p>AFF A700</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Mapping of storage, FC and Ethernet connections between original nodes and new nodes in advance is recommended.</p>
</li>
<li>
<p>If the new platform has fewer slots than the original system, or if it has fewer or different types of ports, you might need to add an adapter to the new system.</p>
<div class="paragraph">
<p>For more information, see the <a href="https://hwu.netapp.com/">NetApp Hardware Universe</a></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example names are used in this procedure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>site_A</p>
<div class="ulist">
<ul>
<li>
<p>Before upgrade:</p>
<div class="ulist">
<ul>
<li>
<p>node_A_1-old</p>
</li>
<li>
<p>node_A_2-old</p>
</li>
</ul>
</div>
</li>
<li>
<p>After upgrade:</p>
<div class="ulist">
<ul>
<li>
<p>node_A_1-new</p>
</li>
<li>
<p>node_A_2-new</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>site_B</p>
<div class="ulist">
<ul>
<li>
<p>Before upgrade:</p>
<div class="ulist">
<ul>
<li>
<p>node_B_1-old</p>
</li>
<li>
<p>node_B_2-old</p>
</li>
</ul>
</div>
</li>
<li>
<p>After upgrade:</p>
<div class="ulist">
<ul>
<li>
<p>node_B_1-new</p>
</li>
<li>
<p>node_B_2-new</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-for-the-upgrade">Preparing for the upgrade</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>Before making any changes to the existing MetroCluster configuration, you must check the health of the configuration, prepare the new platforms, and perform other miscellaneous tasks.</p>
</div>
<div class="sect2">
<h3 id="verifying-the-health-of-the-metrocluster-configuration">Verifying the health of the MetroCluster configuration</h3>
<div class="paragraph lead">
<p>You must verify the health and connectivity of the MetroCluster configuration prior to performing the upgrade.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Verify the operation of the MetroCluster configuration in ONTAP:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Check whether the nodes are multipathed:
<br>
<code><strong>node run -node <em>node-name</em> sysconfig -a</strong></code></p>
<div class="paragraph">
<p>You should issue this command for each node in the MetroCluster configuration.</p>
</div>
</li>
<li>
<p>Verify that there are no broken disks in the configuration:
<br>
<code><strong>storage disk show -broken</strong></code></p>
<div class="paragraph">
<p>You should issue this command on each node in the MetroCluster configuration.</p>
</div>
</li>
<li>
<p>Check for any health alerts:
<br>
<code><strong>system health alert show</strong></code></p>
<div class="paragraph">
<p>You should issue this command on each cluster.</p>
</div>
</li>
<li>
<p>Verify the licenses on the clusters:
<br>
<code><strong>system license show</strong></code></p>
<div class="paragraph">
<p>You should issue this command on each cluster.</p>
</div>
</li>
<li>
<p>Verify the devices connected to the nodes:</p>
<div class="paragraph">
<p><code><strong>network device-discovery show</strong></code></p>
</div>
<div class="paragraph">
<p>You should issue this command on each cluster.</p>
</div>
</li>
<li>
<p>Verify that the timezone and time is set correctly on both sites:
<br>
<code><strong>cluster date show</strong></code></p>
<div class="paragraph">
<p>You should issue this command on each cluster. You can use the <code>cluster date</code> commands to configure the time and timezone.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Check for any health alerts on the switches (if present):</p>
<div class="paragraph">
<p><code><strong>storage switch show</strong></code></p>
</div>
<div class="paragraph">
<p>You should issue this command on each cluster.</p>
</div>
</li>
<li>
<p>Confirm the operational mode of the MetroCluster configuration and perform a MetroCluster check.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm the MetroCluster configuration and that the operational mode is normal:
<br>
<code><strong>metrocluster show</strong></code></p>
</li>
<li>
<p>Confirm that all expected nodes are shown:
<br>
<code><strong>metrocluster node show</strong></code></p>
</li>
<li>
<p>Issue the following command:
<br>
<code><strong>metrocluster check run</strong></code></p>
</li>
<li>
<p>Display the results of the MetroCluster check:
<br>
<code><strong>metrocluster check show</strong></code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Check the MetroCluster cabling with the Config Advisor tool.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Download and run Config Advisor.</p>
<div class="paragraph">
<p><a href="https://mysupport.netapp.com/site/tools/tool-eula/activeiq-configadvisor">NetApp Downloads: Config Advisor</a></p>
</div>
</li>
<li>
<p>After running Config Advisor, review the tool&#8217;s output and follow the recommendations in the output to address any issues discovered.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="mapping-ports-from-the-old-nodes-to-the-new-nodes">Mapping ports from the old nodes to the new nodes</h3>
<div class="paragraph lead">
<p>You must plan the mapping of the LIFs on physical ports on the old nodes to the physical ports on the new nodes.</p>
</div>
<div class="paragraph">
<p>When the new node is first booted during the upgrade process, it will replay the most recent configuration of the old node it is replacing. When you boot node_A_1-new, ONTAP attempts to host LIFs on the same ports that were used on node_A_1-old. Therefore, as part of the upgrade you must adjust the port and LIF configuration so it is compatible with that of the old node. During the upgrade procedure, you will perform steps on both the old and new nodes to ensure correct cluster, management, and data LIF configuration.</p>
</div>
<div class="paragraph">
<p>The following table shows examples of configuration changes related to the port requirements of the new nodes.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2">Cluster interconnect physical ports</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Old controller</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">New controller</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required action</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>e0a, e0b</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>e3a, e3b</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>No matching port. After upgrade, you must recreate cluster ports.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>e0c, e0d</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>e0a,e0b,e0c,e0d</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>e0c and e0d are matching ports. You do not have to change the configuration, but after upgrade you can spread your cluster LIFs across the available cluster ports.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Determine what physical ports are available on the new controllers and what LIFs can be hosted on the ports.</p>
<div class="paragraph">
<p>The controller&#8217;s port usage depends on the platform module and which switches you will use in the MetroCluster IP configuration. You can gather the port usage of the new platforms from the <a href="https://hwu.netapp.com">NetApp Hardware Universe</a>.</p>
</div>
<div class="paragraph">
<p>Also identify the FC-VI card slot usage.</p>
</div>
</li>
<li>
<p>Plan your port usage and, if desired, fill in the following tables for reference for each of the new nodes.</p>
<div class="paragraph">
<p>You will refer to the table as you carry out the upgrade procedure.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top" colspan="3">node_A_1-old</th>
<th class="tableblock halign-left valign-top" colspan="3">node_A_1-new</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPspaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast domains</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IPspaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Broadcast domains</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cluster 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cluster 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cluster 3</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cluster 4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Node management</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cluster management</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data 1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data 2</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data 3</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Data 4</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SAN</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Intercluster port</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="gathering-information-before-the-upgrade">Gathering information before the upgrade</h3>
<div class="paragraph lead">
<p>Before upgrading, you must gather information for each of the nodes, and, if necessary, adjust the network broadcast domains, remove any VLANs and interface groups, and gather encryption information.</p>
</div>
<div class="paragraph">
<p>This task is performed on the existing MetroCluster FC configuration.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Label the cables for the existing controllers, to allow easy identification of cables when setting up the new controllers.</p>
</li>
<li>
<p>Gather the system IDs of the nodes in the MetroCluster configuration:</p>
<div class="paragraph">
<p><code><strong>metrocluster node show -fields node-systemid,dr-partner-systemid</strong></code></p>
</div>
<div class="paragraph">
<p>During the replacement procedure you will replace these system IDs with the system IDs of the new controller modules.</p>
</div>
<div class="paragraph">
<p>In this example for a four-node MetroCluster FC configuration, the following old system IDs are retrieved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>node_A_1-old: 4068741258</p>
</li>
<li>
<p>node_A_2-old: 4068741260</p>
</li>
<li>
<p>node_B_1-old: 4068741254</p>
</li>
<li>
<p>node_B_2-old: 4068741256</p>
<div class="listingblock">
<div class="content">
<pre>metrocluster-siteA::&gt; metrocluster node show -fields node-systemid,ha-partner-systemid,dr-partner-systemid,dr-auxiliary-systemid
dr-group-id   cluster                       node                   node-systemid          ha-partner-systemid     dr-partner-systemid    dr-auxiliary-systemid
-----------        ------------------------- ------------------    -------------                   -------------------                 -------------------              ---------------------
1                    Cluster_A                  Node_A_1-old   4068741258              4068741260                        4068741256                    4068741256
1                    Cluster_A                    Node_A_2-old   4068741260              4068741258                        4068741254                    4068741254
1                    Cluster_B                    Node_B_1-old   4068741254              4068741256                         4068741258                    4068741260
1                    Cluster_B                    Node_B_2-old   4068741256              4068741254                        4068741260                    4068741258
4 entries were displayed.</pre>
</div>
</div>
<div class="paragraph">
<p>In this example for a two-node MetroCluster FC configuration, the following old system IDs are retrieved:</p>
</div>
</li>
<li>
<p>node_A_1: 4068741258</p>
</li>
<li>
<p>node_B_1: 4068741254</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>metrocluster node show -fields node-systemid,dr-partner-systemid

dr-group-id cluster    node      node-systemid dr-partner-systemid
----------- ---------- --------  ------------- ------------
1           Cluster_A  Node_A_1-old  4068741258    4068741254
1           Cluster_B  node_B_1-old  -             -
2 entries were displayed.</pre>
</div>
</div>
</li>
<li>
<p>Gather port and LIF information for each node.</p>
<div class="paragraph">
<p>You should gather the output of the following commands for each node:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>network interface show -role cluster,node-mgmt</code></p>
</li>
<li>
<p><code>network port show -node <em>node-name</em> -type physical</code></p>
</li>
<li>
<p><code>network port vlan show -node <em>node-name</em></code></p>
</li>
<li>
<p><code>network port ifgrp show -node <em>node_name</em> -instance</code></p>
</li>
<li>
<p><code>network port broadcast-domain show</code></p>
</li>
<li>
<p><code>network port reachability show -detail</code></p>
</li>
<li>
<p><code>network ipspace show</code></p>
</li>
<li>
<p><code>volume show</code></p>
</li>
<li>
<p><code>storage aggregate show</code></p>
</li>
<li>
<p><code>system node run -node <em>node-name</em> sysconfig -a</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If the MetroCluster nodes are in a SAN configuration, collect the relevant information.</p>
<div class="paragraph">
<p>You should gather the output of the following commands:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fcp adapter show -instance</code></p>
</li>
<li>
<p><code>fcp interface show -instance</code></p>
</li>
<li>
<p><code>iscsi interface show</code></p>
</li>
<li>
<p><code>ucadmin show</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>If the root volume is encrypted, collect and save the passphrase used for key-manager:</p>
<div class="paragraph">
<p><code><strong>security key-manager backup show</strong></code></p>
</div>
</li>
<li>
<p>If the MetroCluster nodes are using encryption for volumes or aggregates, copy information about the keys and passphrases.</p>
<div class="paragraph">
<p>For additional information, see <a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.pow-nve/GUID-1677AE0A-FEF7-45FA-8616-885AA3283BCF.html">Backing up onboard key management information manually</a>.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>If Onboard Key Manager is configured:
<br>
<code><strong>security key-manager onboard show-backup</strong></code></p>
<div class="paragraph">
<p>You will need the passphrase later in the upgrade procedure.</p>
</div>
</li>
<li>
<p>If enterprise key management (KMIP) is configured, issue the following commands:
<br>
<code><strong>security key-manager external show -instance</strong></code></p>
<div class="paragraph">
<p><code><strong>security key-manager key query</strong></code></p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="removing-the-existing-configuration-from-the-tiebreaker-or-other-monitoring-software">Removing the existing configuration from the Tiebreaker or other monitoring software</h3>
<div class="paragraph lead">
<p>If the existing configuration is monitored with the MetroCluster Tiebreaker configuration or other third-party applications (for example, ClusterLion) that can initiate a switchover, you must remove the MetroCluster configuration from the Tiebreaker or other software prior to transition.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Remove the existing MetroCluster configuration from the Tiebreaker software.</p>
<div class="paragraph">
<p><a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.hw-metrocluster-tiebreaker/GUID-34C97A45-0BFF-46DD-B104-2AB2805A983D.html">Removing MetroCluster configurations</a></p>
</div>
</li>
<li>
<p>Remove the existing MetroCluster configuration from any third-party application that can initiate switchover.</p>
<div class="paragraph">
<p>Refer to the documentation for the application.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="sending-a-custom-autosupport-message-prior-to-maintenance">Sending a custom AutoSupport message prior to maintenance</h3>
<div class="paragraph lead">
<p>Before performing the maintenance, you should issue an AutoSupport message to notify NetApp technical support that maintenance is underway. Informing technical support that maintenance is underway prevents them from opening a case on the assumption that a disruption has occurred.</p>
</div>
<div class="paragraph">
<p>This task must be performed on each MetroCluster site.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>To prevent automatic support case generation, send an Autosupport message to indicate maintenance is underway.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Issue the following command:
<br>
<code><strong>system node autosupport invoke -node * -type all -message MAINT=<em>maintenance-window-in-hours</em></strong></code></p>
<div class="paragraph">
<p><code>maintenance-window-in-hours</code> specifies the length of the maintenance window, with a maximum of 72 hours. If the maintenance is completed before the time has elapsed, you can invoke an AutoSupport message indicating the end of the maintenance period:</p>
</div>
<div class="paragraph">
<p><code><strong>system node autosupport invoke -node * -type all -message MAINT=end</strong></code></p>
</div>
</li>
<li>
<p>Repeat the command on the partner cluster.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="switching-over-the-metrocluster-configuration">Switching over the MetroCluster configuration</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>You must switch over the configuration to site_A so that the platforms on site_B can be upgraded.</p>
</div>
<div class="paragraph">
<p>This task must be performed on site_A.</p>
</div>
<div class="paragraph">
<p>After completing this task, cluster_A is active and serving data for both sites. cluster_B is inactive, and ready to begin the upgrade process, as shown in the following illustration.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/mcc_upgrade_cluster_a_in_switchover.png" alt="mcc upgrade cluster a in switchover">
</div>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Switch over the MetroCluster configuration to site_A so that site_B&#8217;s nodes can be upgraded:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Issue the following command on cluster_A:
<br>
<code><strong>metrocluster switchover -controller-replacement true</strong></code></p>
<div class="paragraph">
<p>The operation can take several minutes to complete.</p>
</div>
</li>
<li>
<p>Monitor the switchover operation:
<br>
<code><strong>metrocluster operation show</strong></code></p>
</li>
<li>
<p>After the operation is complete, confirm that the nodes are in switchover state:
<br>
<code><strong>metrocluster show</strong></code></p>
</li>
<li>
<p>Check the status of the MetroCluster nodes:
<br>
<code><strong>metrocluster node show</strong></code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Heal the data aggregates.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Heal the data aggregates:
<br>
<code><strong>metrocluster heal data-aggregates</strong></code></p>
</li>
<li>
<p>Confirm the heal operation is complete by running the <code>metrocluster operation show</code> command on the healthy cluster:</p>
<div class="listingblock">
<div class="content">
<pre>cluster_A::&gt; metrocluster operation show
  Operation: heal-aggregates
      State: successful
 Start Time: 7/29/2020 20:54:41
   End Time: 7/29/2020 20:54:42
     Errors: -</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Heal the root aggregates.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Heal the data aggregates:
<br>
<code><strong>metrocluster heal root-aggregates</strong></code></p>
</li>
<li>
<p>Confirm the heal operation is complete by running the <code>metrocluster operation show</code> command on the healthy cluster:</p>
<div class="listingblock">
<div class="content">
<pre>cluster_A::&gt; metrocluster operation show
  Operation: heal-root-aggregates
      State: successful
 Start Time: 7/29/2020 20:58:41
   End Time: 7/29/2020 20:59:42
     Errors: -</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="preparing-the-network-configuration-of-the-old-controllers">Preparing the network configuration of the old controllers</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>To ensure that the networking resumes cleanly on the new controllers, you must move LIFs to a common port and then remove the networking configuration of the old controllers.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>This task must be performed on each of the old nodes.</p>
</li>
<li>
<p>You will use the information gathered in <a href="#">Mapping ports from the old nodes to the new nodes</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Boot the old nodes and then log in to the nodes:</p>
<div class="paragraph">
<p><code><strong>boot_ontap</strong></code></p>
</div>
</li>
<li>
<p>Assign the home port of all data LIFs on the old controller to a common port that is the same on both the old and new controller modules.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Display the LIFs:
<br>
<code><strong>network interface show</strong></code></p>
<div class="paragraph">
<p>All data LIFS including SAN and NAS will be admin up and operationally down since those are up at switchover site (cluster_A).</p>
</div>
</li>
<li>
<p>Review the output to find a common physical network port that is the same on both the old and new controllers that is not used as a cluster port.</p>
<div class="paragraph">
<p>For example, e0d is a physical port on old controllers and is also present on new controllers. e0d is not used as a cluster port or otherwise on the new controllers.</p>
</div>
<div class="paragraph">
<p>For port usage for platform models, see the <a href="https://hwu.netapp.com/">NetApp Hardware Universe</a></p>
</div>
</li>
<li>
<p>Modify all data LIFS to use the common port as the home port:</p>
<div class="paragraph">
<p><code><strong>network interface modify -vserver <em>svm-name</em> -lif <em>data-lif</em> -home-port <em>port-id</em></strong></code></p>
</div>
<div class="paragraph">
<p>In our example this is e0d.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>network interface modify -vserver vs0 -lif datalif1 -home-port e0d</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Modify broadcast domains to remove vlan and physical ports that need to be deleted:</p>
<div class="paragraph">
<p><code><strong>broadcast-domain remove-ports -broadcast-domain <em>broadcast-domain-name</em> -ports <em>node-name:port-id</em></strong></code></p>
</div>
<div class="paragraph">
<p>Repeat this step for all VLAN and physical ports.</p>
</div>
</li>
<li>
<p>Remove any VLAN ports using cluster ports as member ports and ifgrps using cluster ports as member ports.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete VLAN ports:
<br>
<code><strong>network port vlan delete -node <em>node-name</em> -vlan-name <em>portid-vlandid</em></strong></code></p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>network port vlan delete -node node1 -vlan-name e1c-80</pre>
</div>
</div>
</li>
<li>
<p>Remove physical ports from the interface groups:
<br>
<code><strong>network port ifgrp remove-port -node <em>node-name</em> -ifgrp <em>interface-group-name</em> -port <em>portid</em></strong></code></p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>network port ifgrp remove-port -node node1 -ifgrp a1a -port e0d</pre>
</div>
</div>
</li>
<li>
<p>Remove VLAN and interface group ports from broadcast domain::
<br>
<code><strong>network port broadcast-domain remove-ports -ipspace <em>ipspace</em> -broadcast-domain <em>broadcast-domain-name</em> -ports <em>nodename:portname,nodename:portname</em>,..</strong></code></p>
</li>
<li>
<p>Modify interface group ports to use other physical ports as member as needed.:
<br>
<code><strong>ifgrp add-port -node <em>node-name</em> -ifgrp <em>interface-group-name</em> -port <em>port-id</em></strong></code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Halt the nodes:</p>
<div class="paragraph">
<p><code><strong>halt -inhibit-takeover true -node <em>node-name</em></strong></code></p>
</div>
<div class="paragraph">
<p>This step must be performed on both nodes.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="removing-the-old-platforms">Removing the old platforms</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>The old controllers must be removed from the configuration.</p>
</div>
<div class="paragraph">
<p>This task is performed on site_B.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Connect to the serial console of the old controllers (node_B_1-old and node_B_2-old) at site_B and verify it is displaying the LOADER prompt.</p>
</li>
<li>
<p>Disconnect the storage and network connections on node_B_1-old and node_B_2-old and label the cables so they can be reconnected to the new nodes.</p>
</li>
<li>
<p>Disconnect the power cables from node_B_1-old and node_B_2-old.</p>
</li>
<li>
<p>Remove the node_B_1-old and node_B_2-old controllers from the rack.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-the-new-controllers">Configuring the new controllers</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>You must rack and install the controllers, perform required setup in Maintenance mode, and then boot the controllers, and verify the LIF configuration on the controllers.</p>
</div>
<div class="sect2">
<h3 id="setting-up-the-new-controllers">Setting up the new controllers</h3>
<div class="paragraph lead">
<p>You must rack and cable the new controllers.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Plan out the positioning of the new controller modules and storage shelves as needed.</p>
<div class="paragraph">
<p>The rack space depends on the platform model of the controller modules, the switch types, and the number of storage shelves in your configuration.</p>
</div>
</li>
<li>
<p>Properly ground yourself.</p>
</li>
<li>
<p>Install the controller modules in the rack or cabinet.</p>
<div class="paragraph">
<p><a href="https://docs.netapp.com/platstor/index.jsp">AFF and FAS Documentation Center</a></p>
</div>
</li>
<li>
<p>If the new controller modules did not come with FC-VI cards of their own and if FC-VI cards from old controllers are compatible on new controllers, swap FC-VI cards and install those in correct slots.</p>
<div class="paragraph">
<p>See the <a href="https://hwu.netapp.com">NetApp Hardware Universe</a> for slot info for FC-VI cards.</p>
</div>
</li>
<li>
<p>Cable the controllers' power, serial console and management connections as described in the <em>MetroCluster Installation and Configuration Guides</em>.</p>
<div class="paragraph">
<p>Do not connect any other cables that were disconnected from old controllers at this time.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.netapp.com/platstor/index.jsp">AFF and FAS Documentation Center</a></p>
</div>
</li>
<li>
<p>Power up the new nodes and press Ctrl-C when prompted to display the LOADER prompt.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="netbooting-the-new-controllers">Netbooting the new controllers</h3>
<div class="paragraph lead">
<p>After you install the new nodes, you need to netboot to ensure the new nodes are running the same version of ONTAP as the original nodes. The term netboot means you are booting from an ONTAP image stored on a remote server. When preparing for netboot, you must put a copy of the ONTAP 9 boot image onto a web server that the system can access.</p>
</div>
<div class="paragraph">
<p>This task is performed on each of the new controller modules.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Access the <a href="https://mysupport.netapp.com/site/">NetApp Support Site</a> to download the files used for performing the netboot of the system.</p>
</li>
<li>
<p>Download the appropriate ONTAP software from the software download section of the NetApp Support Site and store the ontap-version_image.tgz file on a web-accessible directory.</p>
</li>
<li>
<p>Change to the web-accessible directory and verify that the files you need are available.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the platform model is&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAS/AFF8000 series systems</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Extract the contents of the ontap-version_image.tgzfile to the target directory: tar -zxvf ontap-version_image.tgz</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you are extracting the contents on Windows, use 7-Zip or WinRAR to extract the netboot image.Your directory listing should contain a netboot folder with a kernel file:netboot/kernel
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Your directory listing should contain a netboot folder with a kernel file:</p>
</div>
<div class="paragraph">
<p>netboot/kernel</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">All other systems</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Your directory listing should contain a netboot folder with a kernel file: ontap-version_image.tgz</p>
</div>
<div class="paragraph">
<p>You do not need to extract the ontap-version_image.tgz file.</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>At the LOADER prompt, configure the netboot connection for a management LIF:</p>
<div class="ulist">
<ul>
<li>
<p>If IP addressing is DHCP, configure the automatic connection: <code>ifconfig e0M -auto</code></p>
</li>
<li>
<p>If IP addressing is static, configure the manual connection: <code>ifconfig e0M -addr=ip_addr -mask=netmask</code> <code>-gw=gateway</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Perform the netboot.</p>
<div class="ulist">
<ul>
<li>
<p>If the platform is an 80xx series system, use this command: <code>netboot <a href="http://web_server_ip/path_to_web-accessible_directory/netboot/kernel" class="bare">http://web_server_ip/path_to_web-accessible_directory/netboot/kernel</a></code></p>
</li>
<li>
<p>If the platform is any other system, use this command: <code>netboot <a href="http://web_server_ip/path_to_web-accessible_directory/ontap-version_image.tgz" class="bare">http://web_server_ip/path_to_web-accessible_directory/ontap-version_image.tgz</a></code></p>
</li>
</ul>
</div>
</li>
<li>
<p>From the boot menu, select option <strong>\(7\) Install new software first</strong> to download and install the new software image to the boot device.</p>
<div class="literalblock">
<div class="content">
<pre>Disregard the following message: "This procedure is not supported for Non-Disruptive Upgrade on an HA pair". It applies to nondisruptive upgrades of software, not to upgrades of controllers.</pre>
</div>
</div>
</li>
<li>
<p>If you are prompted to continue the procedure, enter <code>y</code>, and when prompted for the package, enter the URL of the image file: <code><a href="http://web_server_ip/path_to_web-accessible_directory/ontap-version_image.tgz" class="bare">http://web_server_ip/path_to_web-accessible_directory/ontap-version_image.tgz</a></code></p>
<div class="literalblock">
<div class="content">
<pre>Enter username/password if applicable, or press Enter to continue.</pre>
</div>
</div>
</li>
<li>
<p>Be sure to enter <code>n</code> to skip the backup recovery when you see a prompt similar to the following:</p>
<div class="literalblock">
<div class="content">
<pre>Do you want to restore the backup configuration now? {y|n} **n**</pre>
</div>
</div>
</li>
<li>
<p>Reboot by entering <code>y</code> when you see a prompt similar to the following:</p>
<div class="literalblock">
<div class="content">
<pre>   The node must be rebooted to start using the newly installed software. Do you want to reboot now? {y|n}
// end include reference</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="clearing-the-configuration-on-a-controller-module">Clearing the configuration on a controller module</h3>
<div class="paragraph lead">
<p>Before using a new controller module in the MetroCluster configuration, you must clear the configuration.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If necessary, halt the node to display the LOADER prompt: <code>halt</code></p>
</li>
<li>
<p>At the LOADER prompt, set the environmental variables to default values: <code>set-defaults</code></p>
</li>
<li>
<p>Save the environment: <code>saveenv``bye</code></p>
</li>
<li>
<p>At the LOADER prompt, launch the boot menu: <code>boot_ontap menu</code></p>
</li>
<li>
<p>At the boot menu prompt, clear the configuration: <code>wipeconfig</code></p>
<div class="paragraph">
<p>Respond <code>yes</code> to the confirmation prompt.</p>
</div>
<div class="paragraph">
<p>The node reboots and the boot menu is displayed again.</p>
</div>
</li>
<li>
<p>At the boot menu, select option <strong>5</strong> to boot the system into Maintenance mode.</p>
<div class="paragraph">
<p>Respond <code>yes</code> to the confirmation prompt.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="restoring-the-hba-configuration">Restoring the HBA configuration</h3>
<div class="paragraph lead">
<p>Depending on the presence and configuration of HBA cards in the controller module, you need to configure them correctly for your site&#8217;s usage.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>In Maintenance mode configure the settings for any HBAs in the system:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Check the current settings of the ports: <code><strong>ucadmin show</strong></code></p>
</li>
<li>
<p>Update the port settings as needed.</p>
</li>
</ol>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you have this type of HBA and desired mode&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Use this command&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CNA FC</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ucadmin modify -m fc -t initiator <em>adapter-name</em></code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CNA Ethernet</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ucadmin modify -mode cna <em>adapter-name</em></code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FC target</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fcadmin config -t target <em>adapter-name</em></code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FC initiator</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fcadmin config -t initiator <em>adapter-name</em></code></p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Exit Maintenance mode: <code><strong>halt</strong></code></p>
<div class="paragraph">
<p>After you run the command, wait until the node stops at the LOADER prompt.</p>
</div>
</li>
<li>
<p>Boot the node back into Maintenance mode to enable the configuration changes to take effect: <code><strong>boot_ontap maint</strong></code></p>
</li>
<li>
<p>Verify the changes you made:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you have this type of HBA&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Use this command&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CNA</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ucadmin show</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>FC</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fcadmin show</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="setting-the-ha-state-on-the-new-controllers-and-chassis">Setting the HA state on the new controllers and chassis</h3>
<div class="paragraph lead">
<p>You must verify the HA state of the controllers and chassis, and, if necessary, update the state to match your system configuration.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>In Maintenance mode, display the HA state of the controller module and chassis:</p>
<div class="paragraph">
<p><code><strong>ha-config show</strong></code></p>
</div>
<div class="paragraph">
<p>The HA state for all components should be mcc.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the MetroCluster configuration has&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">The HA state should be&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Two nodes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>mcc-2n</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Four or eight nodes</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>mcc</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>If the displayed system state of the controller is not correct, set the HA state for the controller module and chassis:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If the MetroCluster configuration has&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Issue these commands&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Two nodes</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><strong>ha-config modify controller mcc-2n</strong></code></p>
</div>
<div class="paragraph">
<p><code><strong>ha-config modify chassis mcc-2n</strong></code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Four or eight nodes</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><strong>ha-config modify controller mcc</strong></code></p>
</div>
<div class="paragraph">
<p><code><strong>ha-config modify chassis mcc</strong></code></p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="reassigning-root-aggregate-disks">Reassigning root aggregate disks</h3>
<div class="paragraph lead">
<p>Reassign the root aggregate disks to the new controller module, using the sysids gathered earlier</p>
</div>
<div class="paragraph">
<p>This task is performed in Maintenance mode.</p>
</div>
<div class="paragraph">
<p>The old system IDs were identified in <a href="#">Gathering information before the upgrade</a>.</p>
</div>
<div class="paragraph">
<p>The examples in this procedure use controllers with the following system IDs:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">Old system ID</th>
<th class="tableblock halign-left valign-top">New system ID</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>node_B_1</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>4068741254</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1574774970</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Cable all other connections to the new controller modules (FC-VI, storage, cluster interconnect, etc.).</p>
</li>
<li>
<p>Halt the system and boot to Maintenance mode from the LOADER prompt:</p>
<div class="paragraph">
<p><code><strong>boot_ontap maint</strong></code></p>
</div>
</li>
<li>
<p>Display the disks owned by node_B_1-old:</p>
<div class="paragraph">
<p><code><strong>disk show -a</strong></code></p>
</div>
<div class="paragraph">
<p>The command output shows the system ID of the new controller module (1574774970). However, the root aggregate disks are still owned by the old system ID (4068741254). This example does not show drives owned by other nodes in the MetroCluster configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*&gt; disk show -a
Local System ID: 1574774970

  DISK         OWNER                     POOL   SERIAL NUMBER    HOME                      DR HOME
------------   -------------             -----  -------------    -------------             -------------
...
rr18:9.126L44 node_B_1-old(4068741254)   Pool1  PZHYN0MD         node_B_1-old(4068741254)  node_B_1-old(4068741254)
rr18:9.126L49 node_B_1-old(4068741254)   Pool1  PPG3J5HA         node_B_1-old(4068741254)  node_B_1-old(4068741254)
rr18:8.126L21 node_B_1-old(4068741254)   Pool1  PZHTDSZD         node_B_1-old(4068741254)  node_B_1-old(4068741254)
rr18:8.126L2  node_B_1-old(4068741254)   Pool0  S0M1J2CF         node_B_1-old(4068741254)  node_B_1-old(4068741254)
rr18:8.126L3  node_B_1-old(4068741254)   Pool0  S0M0CQM5         node_B_1-old(4068741254)  node_B_1-old(4068741254)
rr18:9.126L27 node_B_1-old(4068741254)   Pool0  S0M1PSDW         node_B_1-old(4068741254)  node_B_1-old(4068741254)
...</pre>
</div>
</div>
</li>
<li>
<p>Reassign the root aggregate disks on the drive shelves to the new controller:</p>
<div class="paragraph">
<p><code><strong>disk reassign -s <em>old-sysid</em> -d <em>new-sysid</em></strong></code></p>
</div>
<div class="paragraph">
<p>The following example shows reassignment of drives:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>*&gt; disk reassign -s 4068741254 -d 1574774970
Partner node must not be in Takeover mode during disk reassignment from maintenance mode.
Serious problems could result!!
Do not proceed with reassignment if the partner is in takeover mode. Abort reassignment (y/n)? n

After the node becomes operational, you must perform a takeover and giveback of the HA partner node to ensure disk reassignment is successful.
Do you want to continue (y/n)? Jul 14 19:23:49 [localhost:config.bridge.extra.port:error]: Both FC ports of FC-to-SAS bridge rtp-fc02-41-rr18:9.126L0 S/N [FB7500N107692] are attached to this controller.
y
Disk ownership will be updated on all disks previously belonging to Filer with sysid 4068741254.
Do you want to continue (y/n)? y</pre>
</div>
</div>
</li>
<li>
<p>Check that all disks are reassigned as expected:</p>
<div class="paragraph">
<p><code><strong>disk show</strong></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>*&gt; disk show
Local System ID: 1574774970

  DISK        OWNER                      POOL   SERIAL NUMBER   HOME                      DR HOME
------------  -------------              -----  -------------   -------------             -------------
rr18:8.126L18 node_B_1-new(1574774970)   Pool1  PZHYN0MD        node_B_1-new(1574774970)  node_B_1-new(1574774970)
rr18:9.126L49 node_B_1-new(1574774970)   Pool1  PPG3J5HA        node_B_1-new(1574774970)  node_B_1-new(1574774970)
rr18:8.126L21 node_B_1-new(1574774970)   Pool1  PZHTDSZD        node_B_1-new(1574774970)  node_B_1-new(1574774970)
rr18:8.126L2  node_B_1-new(1574774970)   Pool0  S0M1J2CF        node_B_1-new(1574774970)  node_B_1-new(1574774970)
rr18:9.126L29 node_B_1-new(1574774970)   Pool0  S0M0CQM5        node_B_1-new(1574774970)  node_B_1-new(1574774970)
rr18:8.126L1  node_B_1-new(1574774970)   Pool0  S0M1PSDW        node_B_1-new(1574774970)  node_B_1-new(1574774970)
*&gt;</pre>
</div>
</div>
</li>
<li>
<p>Display the aggregate status:</p>
<div class="paragraph">
<p><code><strong>aggr status</strong></code></p>
</div>
<div class="listingblock">
<div class="content">
<pre>*&gt; aggr status
           Aggr            State       Status           Options
aggr0_node_b_1-root    online      raid_dp, aggr    root, nosnap=on,
                           mirrored                     mirror_resync_priority=high(fixed)
                           fast zeroed
                           64-bit</pre>
</div>
</div>
</li>
<li>
<p>Repeat the above steps on the partner node (node_B_2-new).</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="booting-up-the-new-controllers">Booting up the new controllers</h3>
<div class="paragraph lead">
<p>You must reboot the controllers from the boot menu to update the controller flash image. Additional steps are required if encryption is configured.</p>
</div>
<div class="paragraph">
<p>This task must be performed on all the new controllers.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Halt the node:</p>
<div class="paragraph">
<p><code><strong>halt</strong></code></p>
</div>
</li>
<li>
<p>If external key manager is configured, set the related bootargs:</p>
<div class="paragraph">
<p><code><strong>setenv bootarg.kmip.init.ipaddr <em>ip-address</em></strong></code></p>
</div>
<div class="paragraph">
<p><code><strong>setenv bootarg.kmip.init.netmask <em>netmask</em></strong></code></p>
</div>
<div class="paragraph">
<p><code><strong>setenv bootarg.kmip.init.gateway <em>gateway-address</em></strong></code></p>
</div>
<div class="paragraph">
<p><code><strong>setenv bootarg.kmip.init.interface <em>interface-id</em></strong></code></p>
</div>
</li>
<li>
<p>Display the boot menu:</p>
<div class="paragraph">
<p><code><strong>boot_ontap menu</strong></code></p>
</div>
</li>
<li>
<p>If root encryption is used, issue the boot menu command for your key management configuration.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you are using&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Issue this command at the boot menu prompt&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Onboard key management</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>recover_onboard_keymanager</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>External key management</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>recover_external_keymanager</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>If autoboot is enabled, interrupt autoboot by pressing control-C.</p>
</li>
<li>
<p>From the boot menu, run option (6).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Option 6 will reboot the node twice before completing
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Respond y to the system id change prompts. Wait for the second reboot messages:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Successfully restored env file from boot media...

Rebooting to load the restored env file...</pre>
</div>
</div>
</li>
<li>
<p>Double-check that the partner-sysid is the correct:</p>
<div class="paragraph">
<p><code><strong>printenv partner-sysid</strong></code></p>
</div>
<div class="paragraph">
<p>If the partner-sysid is not correct, set it:</p>
</div>
<div class="paragraph">
<p><code><strong>setenv partner-sysid <em>partner-sysID</em></strong></code></p>
</div>
</li>
<li>
<p>If root encryption is used, again issue the boot menu command for your key management configuration.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you are using&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Issue this command at the boot menu prompt&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Onboard key management</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>recover_onboard_keymanager</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>External key management</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>recover_external_keymanager</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You may need to issue the recover_xxxxxxxx_keymanager command and option 6 at the boot menu prompt multiple times until the nodes fully boot.</p>
</div>
</li>
<li>
<p>Boot the nodes:</p>
<div class="paragraph">
<p><code><strong>boot_ontap</strong></code></p>
</div>
</li>
<li>
<p>Wait for the replaced nodes to boot up.</p>
<div class="paragraph">
<p>If either node is in takeover mode, perform a giveback using the <code>storage failover giveback</code> command.</p>
</div>
</li>
<li>
<p>Verify that all ports are in a broadcast domain:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>View the broadcast domains:
<br>
<code><strong>network port broadcast-domain show</strong></code></p>
</li>
<li>
<p>Add any ports to a broadcast domain as needed.</p>
<div class="paragraph">
<p><a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-nmg/GUID-003BDFCD-58A3-46C9-BF0C-BA1D1D1475F9.html">Adding or removing ports from a broadcast domain</a></p>
</div>
</li>
<li>
<p>Add the physical port that will host the intercluster LIFs to the corresponding Broadcast domain.</p>
</li>
<li>
<p>Modify intercluster LIFs to use the new physical port as home port.</p>
</li>
<li>
<p>After the intercluster LIFs are up, check the cluster peer status and re-establish cluster peering as needed.</p>
<div class="paragraph">
<p>You may need to reconfigure cluster peering.</p>
</div>
<div class="paragraph">
<p><a href="../install-fc/concept_configure_the_mcc_software_in_ontap.html#peering-the-clusters">Creating a cluster peer relationship</a></p>
</div>
</li>
<li>
<p>Recreate VLANs and interface groups as needed.</p>
<div class="paragraph">
<p>VLAN and interface group membership might be different than that of the old node.</p>
</div>
<div class="paragraph">
<p><a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-nmg/GUID-8929FCE2-5888-4051-B8C0-E27CAF3F2A63.html">Creating a VLAN</a></p>
</div>
<div class="paragraph">
<p><a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-nmg/GUID-DBC9DEE2-EAB7-430A-A773-4E3420EE2AA1.html">Combining physical ports to create interface groups</a></p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If encryption is used, restore the keys using the correct command for your key management configuration.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you are using&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Use this command&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Onboard key management</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>security key-manager onboard sync</code></p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.pow-nve/GUID-E4AB2ED4-9227-4974-A311-13036EB43A3D.html">Restoring onboard key management encryption keys</a>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>External key management</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code><strong>security key-manager external restore -vserver <em>SVM</em> -node <em>node</em> -key-server <em>host_name|IP_address:port</em> -key-id key_id -key-tag key_tag</strong> <em>node-name</em></code></p>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.netapp.com/ontap-9/topic/com.netapp.doc.pow-nve/GUID-32DA96C3-9B04-4401-92B8-EAF323C3C863.html">Restoring external key management encryption keys</a>.</p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="verifying-lif-configuration">Verifying LIF configuration</h3>
<div class="paragraph lead">
<p>Verify that LIFs are hosted on appropriate node/ports prior to switchback. The following steps need to be performed</p>
</div>
<div class="paragraph">
<p>This task is performed on site_B, where the nodes have been booted up with root aggregates.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Verify that LIFs are hosted on the appropriate node and ports prior to switchback.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Change to the advanced privilege level:
<br>
<code><strong>set -privilege advanced</strong></code></p>
</li>
<li>
<p>Override the port configuration to ensure proper LIF placement:
<br>
<code><strong>vserver config override -command "network interface modify -vserver <em>vserver_name</em> -home-port <em>active_port_after_upgrade</em> -lif <em>lif_name</em> -home-node <em>new_node_name</em>"</strong></code></p>
<div class="paragraph">
<p>When entering the network interface modify command within the <code>vserver config override</code> command, you cannot use the tab autocomplete feature. You can create the <code>network interface modify</code> using autocomplete and then enclose it in the <code>vserver config override</code> command.</p>
</div>
</li>
<li>
<p>Return to the admin privilege level:
<br>
<code><strong>set -privilege admin</strong></code></p>
</li>
</ol>
</div>
</li>
<li>
<p>Revert the interfaces to their home node:</p>
<div class="paragraph">
<p><code><strong>network interface revert * -vserver <em>vserver-name</em></strong></code></p>
</div>
<div class="paragraph">
<p>Perform this step on all SVMs as required.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="switching-back-the-metrocluster-configuration">Switching back the MetroCluster configuration</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>After the new controllers have been configured, you switch back the MetroCluster configuration to return the configuration to normal operation.</p>
</div>
<div class="paragraph">
<p>In this task, you will perform the switchback operation, returning the MetroCluster configuration to normal operation. The nodes on site_A are still awaiting upgrade.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../media/mcc_upgrade_cluster_a_switchback.png" alt="mcc upgrade cluster a switchback">
</div>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Issue the <code>metrocluster node show</code> command on site_B and check the output.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Verify that the new nodes are represented correctly.</p>
</li>
<li>
<p>Verify that the new nodes are in "Waiting for switchback state."</p>
</li>
</ol>
</div>
</li>
<li>
<p>Switchback the cluster: <code>metrocluster switchback</code></p>
</li>
<li>
<p>Check the progress of the switchback operation:</p>
<div class="paragraph">
<p><code><strong>metrocluster show</strong></code></p>
</div>
<div class="paragraph">
<p>The switchback operation is still in progress when the output displays <code>waiting-for-switchback</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster_B::&gt; metrocluster show
Cluster                   Entry Name          State
------------------------- ------------------- -----------
 Local: cluster_B         Configuration state configured
                          Mode                switchover
                          AUSO Failure Domain -
Remote: cluster_A         Configuration state configured
                          Mode                waiting-for-switchback
                          AUSO Failure Domain -</pre>
</div>
</div>
<div class="paragraph">
<p>The switchback operation is complete when the output displays <code>normal</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>cluster_B::&gt; metrocluster show
Cluster                   Entry Name          State
------------------------- ------------------- -----------
 Local: cluster_B         Configuration state configured
                          Mode                normal
                          AUSO Failure Domain -
Remote: cluster_A         Configuration state configured
                          Mode                normal
                          AUSO Failure Domain -</pre>
</div>
</div>
<div class="paragraph">
<p>If a switchback takes a long time to finish, you can check on the status of in-progress baselines by using the <code>metrocluster config-replication resync-status show</code> command. This command is at the advanced privilege level.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="checking-the-health-of-the-metrocluster-configuration">Checking the health of the MetroCluster configuration</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>After upgrading the controller modules you must verify the health of the MetroCluster configuration.</p>
</div>
<div class="paragraph">
<p>This task can be performed on any node in the MetroCluster configuration.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Verify the operation of the MetroCluster configuration:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Confirm the MetroCluster configuration and that the operational mode is normal:
<br>
<code><strong>metrocluster show</strong></code></p>
</li>
<li>
<p>Perform a MetroCluster check:
<br>
<code><strong>metrocluster check run</strong></code></p>
</li>
<li>
<p>Display the results of the MetroCluster check:
<br>
<code><strong>metrocluster check show</strong></code></p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="upgrading-the-nodes-on-cluster_a">Upgrading the nodes on cluster_A</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>You must repeat the upgrade tasks on cluster_A.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Repeat the steps to upgrade the nodes on cluster_A, beginning with <a href="#">Preparing for the upgrade</a>.</p>
<div class="paragraph">
<p>As you perform the tasks, all example references to the clusters and nodes are reversed. For example, when the example is given to switchover from cluster_A, you will switchover from cluster_B.</p>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sending-a-custom-autosupport-message-after-maintenance">Sending a custom AutoSupport message after maintenance</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>After completing the upgrade, you should send an AutoSupport message indicating the end of maintenance, so automatic case creation can resume.</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>To resume automatic support case generation, send an Autosupport message to indicate that the maintenance is complete.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Issue the following command:
<br>
<code><strong>system node autosupport invoke -node * -type all -message MAINT=end</strong></code></p>
</li>
<li>
<p>Repeat the command on the partner cluster.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restoring-tiebreaker-monitoring">Restoring Tiebreaker monitoring</h2>
<div class="sectionbody">
<div class="paragraph lead">
<p>If the MetroCluster configuration was previously configured for monitoring by the Tiebreaker software, you can restore the Tiebreaker connection.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the steps in <a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.hw-metrocluster-tiebreaker/GUID-7259BCA4-104C-49C6-BAD0-1068CA2A3DA5.html">Adding MetroCluster configurations</a> in the <em>MetroCluster Tiebreaker Installation and Configuration Guide</em>.</p>
</li>
</ol>
</div>
</div>
</div>

    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
  <div class="page-nav-toolbar">
    <div class="page-nav-contribute"  >
      <div class="page-nav-contribute-title">CONTRIBUTE</div>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-metrocluster/blob/main/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.adoc" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-metrocluster/images/github.png" class="github-icon" />Edit on GitHub</a>
      <a target="_blank" href="https://github.com/NetAppDocs/ontap-metrocluster/issues/new?body=Page%3A%20[Upgrading controllers in a MetroCluster FC configuration using switchover and switchback](https://docs.netapp.com/us-en/ontap-metrocluster/upgrade/task_upgrade_controllers_in_a_four_node_fc_mcc_us_switchover_and_switchback_mcc_fc_4n_cu.html)" class="btn btn-default githubEditButton" role="button"><img src="/us-en/ontap-metrocluster/images/github.png" class="github-icon" />Request doc changes</a>
      <a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Contributor's Guide</a>
    </div>
    <div class="page-nav-container">
      <nav class="page-nav-fixed">
        <div class="page-nav-title">ON THIS PAGE</div>
        <div class="page-nav-links">
          <ul class="page-nav-inner" id="page-menu"></ul>
        </div>
      </nav>
    </div>
  </div>
  
  <div style="clear: both"></div><!-- Main needs to have height -->
</div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
      <div class="n-footer__bottom-left">

        <div class="n-footer__copyright">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
            <a href="https://www.netapp.com/us/legal/copyright.aspx"> 2021 NetApp, Inc.</a>
            </li>

</ul>
</div>
<div class="n-footer__social-links">
<ul class="n-footer__social-link-list">
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-blog" href="https://blog.netapp.com" target="_blank" title="blog" alt="blog">
<span class="n-footer__social-link-text">blog</span>
<svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
  <title>blog@</title>
  <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#blog"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-community" href="https://community.netapp.com/" target="_blank" title="community" alt="community">
<span class="n-footer__social-link-text">community</span>
<svg class="n-icon-community n-footer__social-link-icon" aria-labelledby="title">
<title>community@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#comments"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netapp" target="_blank" title="twitter" alt="twitter">
<span class="n-footer__social-link-text">twitter</span>
<svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
<title>twitter@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#twitter"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-facebook" href="https://www.facebook.com/NetApp" target="_blank" title="facebook" alt="facebook">
<span class="n-footer__social-link-text">facebook</span>
<svg class="n-icon-facebook n-footer__social-link-icon" aria-labelledby="title">
<title>facebook@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#facebook"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-linkedin" href="https://www.linkedin.com/company/netapp" target="_blank" title="linkedin" alt="linkedin">
<span class="n-footer__social-link-text">linkedin</span>
<svg class="n-icon-linkedin n-footer__social-link-icon" aria-labelledby="title">
<title>linkedin@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#linkedin"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTV" target="_blank" title="youtube" alt="youtube">
<span class="n-footer__social-link-text">youtube</span>
<svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
<title>youtube@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#youtube"></use>
</svg>

</a>
</li>
<li class="n-footer__social-link-list-item">
<a class="n-footer__social-link" data-ntap-social="follow-slideshare" href="https://www.slideshare.net/NetApp" target="_blank" title="slideshare" alt="slideshare">
<span class="n-footer__social-link-text">slideshare</span>
<svg class="n-icon-slideshare n-footer__social-link-icon" aria-labelledby="title">
<title>slideshare@</title>
<use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/us-en/ontap-metrocluster/common/svg/sprite.svg#slideshare"></use>
</svg>

</a>
</li>
</ul>
</div>

</div>
<div class="n-footer__bottom-right">
  <p class="n-footer__fine-print">Have feedback for our website?<a target="_self" href="javascript:netapp_mailto()" class="n-footer__copyright">Let us know</a>
  <a href="https://docs.netapp.com/us-en/announcements/" class="n-footer__copyright">Announcements</a>
  </p>
</div>
</div>
</div>
</footer>

      </div>

      <!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/ontap-metrocluster/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/ontap-metrocluster/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/ontap-metrocluster/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/ontap-metrocluster/js/www-ntap.js'></script>
  </body>

  
</html>
